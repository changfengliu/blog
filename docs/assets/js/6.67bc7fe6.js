(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{170:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("åˆæ¬¡å¬åˆ° React Hooksï¼Œæ˜¯åœ¨å…¶åˆšå‘å¸ƒçš„é‚£å‡ å¤©ï¼Œç½‘ä¸Šé“ºå¤©ç›–åœ°çš„æ–‡ç« ä»‹ç»å®ƒã€‚çœ‹å­—é¢æ„æ€æ˜¯ ã€ŒReact é’©å­ã€ï¼Œå°±æƒ³å½“ç„¶åœ°ç†è§£åº”è¯¥æ˜¯ä¿®æ”¹ React ç»„ä»¶çš„é’©å­å§ã€‚React å»¶ä¼¸çš„æ¦‚å¿µéžå¸¸å¤šï¼Œé«˜é˜¶ç»„ä»¶ã€å‡½æ•°å¼ã€Render Propsã€Contextã€ç­‰ç­‰ã€‚åˆæ¥äº†ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œå‰ç«¯å¼€å‘å·²ç»å¤Ÿå¤æ‚äº†ï¼è¿‘ä¸¤å¹´ä¸€ç›´ç”¨ Vueï¼Œè§‰å¾— React ç›¸å…³çš„è¯¸å¤šç‰¹æ€§ï¼Œåœ¨ Vue ä¸­ä¹Ÿéƒ½æœ‰ç±»ä¼¼çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç«‹å³åŽ»äº†è§£å®ƒã€‚")]),t._v(" "),a("p",[t._v("åŽæ¥çœ‹åˆ°å°¤å¤§åœ¨ "),a("a",{attrs:{href:"https://www.bilibili.com/video/av36787459/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue 3.0 æœ€è¿‘è¿›å±•"),a("OutboundLink")],1),t._v(" çš„è§†é¢‘ä¸­ä¹Ÿæåˆ°äº† Hooks APIï¼Œå¹¶å†™äº†ä¸€ä¸ªåœ¨ "),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue ä¸­ä½¿ç”¨ Hooks çš„ POC"),a("OutboundLink")],1),t._v("ã€‚çœ‹æ¥ Hooks è¿˜æ˜¯æŒºé‡è¦çš„ï¼ŒäºŽæ˜¯é©¬ä¸Šæ‰¾åˆ°å®˜æ–¹çš„ React Hooks æ–‡æ¡£ä¸Žå‘å¸ƒä¼šçš„è§†é¢‘ -- åˆä¸€è½®çš„æ¶è¡¥ã€‚")]),t._v(" "),a("p",[t._v("çœ‹äº†ç›¸å…³èµ„æ–™ï¼Œè§‰å¾— Hooks çš„åº”ç”¨å‰æ™¯è¿˜æ˜¯æŒºè¯±äººçš„ï¼Œè§£å†³äº†ç›®å‰å‰ç«¯å¼€å‘ä¸­çš„è¯¸å¤šç—›ç‚¹ã€‚ä¸è¿‡ React Hooks ç›®å‰è¿˜åœ¨ alpha é˜¶æ®µï¼Œä¸å¤ªå®Œå–„ï¼Œå†…ç½® Hooks ä¹Ÿä¸ä¸°å¯Œã€‚è€Œ Vue åªæœ‰ä¸ª Hooks POCï¼ŒVue3.0 å¾ˆå¯èƒ½ä¼šåŠ ä¸Šï¼Œä½†éœ€è¦å†ç­‰å‡ ä¸ªæœˆã€‚æ‰€ä»¥æš‚ä¸å»ºè®®åœ¨æ­£å¼ä»£ç ä¸­ä½¿ç”¨ã€‚")]),t._v(" "),a("p",[t._v("æœ¬ç¯‡æ–‡ç« ç€é‡è§£é‡Šä¸€ä¸‹æˆ‘å¯¹ Hooks çš„ç†è§£ï¼Œä»¥åŠ Hooks API åœ¨ Vue ä¸­çš„æºç å®žçŽ°ã€‚ä¹Ÿè¯´æ˜Žä¸€ä¸‹ Hooks æ˜¯ä¸ªä¸­ç«‹çš„æ¦‚å¿µï¼Œå¯ä»¥åœ¨ä»»ä½•æ¡†æž¶ä¸­ä½¿ç”¨ï¼Œéž React æ‰€ç‹¬æœ‰ ðŸ˜ƒã€‚")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¤è¿°ä¸€ä¸‹ Hooks ä¼šå¸®æˆ‘ä»¬è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("æŒ‰ç…§ "),a("a",{attrs:{href:"https://reactjs.org/docs/hooks-intro.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dan çš„è¯´æ³•"),a("OutboundLink")],1),t._v("ï¼ŒReact é¡¹ç›®çš„å¼€å‘ä¸­é‡åˆ°äº†ä»¥ä¸‹å‡ ä¸ªç—›ç‚¹ï¼š")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("å½“ç„¶ Vue é¡¹ç›®ä¹Ÿæ˜¯ä¸€æ ·ï¼Œè¿™äº›é—®é¢˜å…¶å®žä¹Ÿæ˜¯ç›¸å…³è”çš„ã€‚")]),t._v(" "),a("p",[t._v("ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼Œæˆ‘ä»¬å°†é¡µé¢æ‹†åˆ†æˆä¸åŒçš„ç»„ä»¶ï¼ŒæŒ‰è‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµï¼Œå±‚å±‚åµŒå¥—ã€‚ä»£ç ç»“æž„çš„æœ€å°é¢—ç²’æ˜¯ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æžœæŸäº›ç»„ä»¶å¤ªå¤§ï¼Œæˆ‘ä»¬å°±ç»§ç»­æ‹†åˆ†æˆæ›´å°çš„ç»„ä»¶ï¼Œç„¶åŽåœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨å®ƒã€‚\nå¦‚æžœå¤šç»„ä»¶ä¹‹é—´æœ‰ä¸å°‘é€šç”¨é€»è¾‘ï¼Œæˆ‘ä»¬å°±ç”¨ mixin æˆ– æž„å»ºç»„ä»¶çš„ç»§æ‰¿ä½“ç³»ã€‚")]),t._v(" "),a("p",[t._v("é—®é¢˜æ˜¯ï¼Œç»„ä»¶æ‹†åˆ†ï¼Œä¼šä½¿æˆ‘ä»¬å¾ˆå®¹æ˜“ä¸å°å¿ƒå°±æŠŠç»„ä»¶çš„å±‚çº§æžå¾—å¾ˆæ·±ï¼Œå¢žåŠ ç³»ç»Ÿå¤æ‚åº¦ä¸è¯´ï¼Œæ€§èƒ½ä¹Ÿå¯èƒ½å—åˆ°å½±å“ã€‚å¹¶ä¸”ï¼Œæœ‰äº›ç»„ä»¶çš„äº¤äº’é€»è¾‘ç¡®å®žæ¯”è¾ƒå¤æ‚ï¼Œæ‹†åˆ†ä¸å¾—ï¼Œç³»ç»Ÿé•¿æœŸè¿­ä»£ä¸‹æ¥ï¼Œç´¯ç§¯çš„ä»£ç é‡å¾ˆå¤§ï¼Œç›¸å…³è”çš„é€»è¾‘åˆ†æ•£åœ¨ç»„ä»¶ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚")]),t._v(" "),a("p",[t._v("è·¨ç»„ä»¶é€»è¾‘å¤ç”¨æ›´åŠ æ£˜æ‰‹ï¼mixin æ˜¯ä¸€ä¸ªåŒåˆƒå‰‘(å‚è€ƒ: "),a("a",{attrs:{href:"https://reactjs.org/blog/2016/07/13/mixins-considered-harmful.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mixin æ˜¯æœ‰å®³çš„"),a("OutboundLink")],1),t._v(")ï¼›ç»„ä»¶ç»§æ‰¿ä¹Ÿä¸å¯å–ï¼Œè™½ç„¶åœ¨å¼ºç±»åž‹çš„é¢å‘å¯¹è±¡è¯­è¨€(å¦‚:Java/C#)ä¸­ï¼Œç»§æ‰¿ç”¨ç€å¾ˆå¥½ï¼Œä½†åœ¨ JavaScript ä¸­æ€»æ„Ÿåˆ°åŠ›ä¸ä»Žå¿ƒï¼Œä¹Ÿä½¿å¾—ä»£ç æ™¦æ¶©éš¾æ‡‚ï¼›æŠ½å– util åŒ…ä¹Ÿæ˜¯ä¸€ä¸ªæƒ¯ç”¨çš„åšæ³•ï¼Œä½†ï¼Œå¦‚æžœè¦æŠ½å–çš„å…¬ç”¨é€»è¾‘éœ€å…³è”ç»„ä»¶çš„æœ¬åœ°çŠ¶æ€å‘¢ï¼Œå¦‚æžœç›¸å…³è”çš„å…¬ç”¨é€»è¾‘éœ€è¦åˆ†æ•£åœ¨ç»„ä»¶çš„ä¸åŒç”Ÿå‘½å‘¨æœŸä¸­å‘¢ï¼Œå°±æžä¸å®šäº†ï¼è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€å°±å¦¥åäº† -- å¤§ç»„ä»¶/é‡å¤é€»è¾‘äº§ç”Ÿäº†ã€‚")]),t._v(" "),a("p",[t._v("ç±»ç»„ä»¶ä¹Ÿè®©äººçˆ±æ¨äº¤ç»‡ï¼Œä¸€ç›´ä»¥æ¥æˆ‘ä»¬ä¹Ÿæå€¡ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æŠ½è±¡ä»£ç ç»“æž„ï¼Œåœ¨æ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œç¡®å®žæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä½†æˆ‘ä¸ªäººè§‰å¾—åœ¨ JavaScript ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨åŸºäºŽ React/Vue ç»„ä»¶ä½“ç³»çš„å¼€å‘ä¸­ï¼Œå¹¶ä¸å¾ˆåˆé€‚ã€‚æˆ‘ä»¬ç»å¸¸éœ€è¦å¥‡æŠ€æ·«å·§çš„æ‰‹æ®µä½¿ JavaScript ç±»åž‹èƒ½å¤Ÿæ”¯æŒ superã€ç§æœ‰æˆå‘˜ï¼Œå¹¶å°å¿ƒåœ°å¤„ç†å‡½æ•°ä¸­ this çš„æŒ‡å‘ã€‚å¾—ç›ŠäºŽ JavaScript çš„çµæ´»æ€§ä¸Žå¼ºå¤§çš„è¡¨çŽ°åŠ›ï¼Œæ€»èƒ½å¤Ÿæ‰¾åˆ°æ­£ç¡®ä¹¦å†™ä»£ç çš„æ–¹å¼ã€‚é—®é¢˜æ˜¯ï¼Œè¿™æ ·çš„ä»£ç æ€Žä¹ˆç»´æŠ¤å‘¢ï¼Œæˆ‘ä»¬å¸Œæœ›ä»£ç ç®€æ´æ˜Žäº†ï¼Œç¬¦åˆæƒ¯ä¾‹å†™æ³•ï¼Œè€Œéžæ™¦æ¶©éš¾æ‡‚ã€é›·åŒºéå¸ƒã€‚å•è¯´ thisï¼Œæˆ‘ä»¬çŸ¥é“ JavaScript çš„åŸºäºŽé™æ€ä½œç”¨åŸŸçš„ï¼Œå³ä»Žæºç ä¸Šçœ‹ï¼Œå°±èƒ½å¤ŸæŽ¨æ–­å˜é‡çš„ä½œç”¨åŸŸï¼Œä½† this å´æ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒæ˜¯åŸºäºŽåŠ¨æ€ä½œç”¨åŸŸçš„ï¼Œå°±æ˜¯è¯´ this çš„å€¼æ˜¯ç”±è°ƒç”¨è€…å†³å®šçš„ã€‚åŒä¸€ä¸ªæ–¹æ³•ï¼Œç”¨ä¸åŒçš„æ–¹å¼è°ƒç”¨ï¼Œå…¶ this æŒ‡å‘å®Œå…¨ä¸ä¸€æ ·ï¼Œä½¿å¾—æˆ‘ä»¬ä¸å¾—ä¸å¤§é‡ä½¿ç”¨ bindï¼Œä»¥ä¿è¯ this çš„æŒ‡å‘ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("å…³äºŽ JavaScript ä¸­çš„ this ç”¨æ³•ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦ï¼Œå¯å‚è€ƒï¼š"),a("a",{attrs:{href:"http://dmitrysoshnikov.com/ecmascript/chapter-3-this/",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯¦è§£ this"),a("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),a("p",[t._v("å¦‚ä½•è§£å†³è¿™äº›ç—›ç‚¹å‘¢ -- Hooks !")]),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("wikipedia ä¸Šå…³äºŽ "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Hooking",target:"_blank",rel:"noopener noreferrer"}},[t._v("hooks"),a("OutboundLink")],1),t._v(" çš„å®šä¹‰æ˜¯ï¼š")]),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("ç¿»è¯‘æˆä¸­æ–‡å«ä¹‰æ˜¯ï¼šHooks åŒ…å«äº†ä¸€ç³»åˆ—æŠ€æœ¯ï¼Œç”¨äºŽæ”¹å˜æˆ–å¢žå¼ºæ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€è½¯ä»¶ç»„ä»¶çš„è¡Œä¸ºã€‚è¿™äº›æŠ€æœ¯é€šè¿‡æ‹¦æˆªè½¯ä»¶è¿è¡Œè¿‡ç¨‹ä¸­çš„å‡½æ•°è°ƒç”¨ã€æ¶ˆæ¯ã€äº‹ä»¶æ¥å®žçŽ°ã€‚")]),t._v(" "),a("p",[t._v("å°±æ˜¯è¯´é€šè¿‡ Hooksï¼Œæˆ‘ä»¬èƒ½å¤ŸåŽæœŸæ”¹å˜æˆ–å¢žå¼ºå·²æœ‰ç³»ç»Ÿçš„è¿è¡Œæ—¶è¡Œä¸ºã€‚é‚£ä¹ˆï¼Œå¯¹åº”åˆ° React/Vue ç»„ä»¶ç³»ç»Ÿï¼Œåˆ™ Hooks æ˜¯å¯ä»¥æ”¹å˜æˆ–å¢žå¼ºç»„ä»¶è¿è¡Œæ—¶è¡Œä¸ºçš„ä»£ç æ¨¡å—ã€‚")]),t._v(" "),a("p",[t._v("é€šè¿‡é˜…è¯» React Hooks çš„æŠ€æœ¯æ–‡æ¡£ï¼Œçš„ç¡®å¦‚æ­¤ã€‚React æä¾›äº†ä¸¤ä¸ªé‡è¦çš„å†…ç½® Hooks :")]),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("React è¿˜æä¾›äº†å…¶å®ƒä¸€äº›ï¼Œç»„ä»¶ç‰¹æ€§ç›¸å…³çš„å†…ç½® Hooksï¼Œå¦‚ useContextã€useReducerã€useMemoã€useRef ç­‰ç­‰ã€‚æœªæ¥åº”è¯¥ä¼šå‡ºçŽ°æ›´å¤šçš„å†…ç½® Hooksï¼Œåˆ‡å…¥ç»„ä»¶è¿è¡Œæ—¶çš„æ–¹æ–¹é¢é¢ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åŸºäºŽè¿™äº›å†…ç½® Hooksï¼Œå®žçŽ°è‡ªå®šä¹‰ Hooksã€‚")]),t._v(" "),a("p",[t._v("React ä¸­å¼ºè°ƒ Hooks åªèƒ½åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ã€‚å‡½æ•°å¼ç»„ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå•çº¯çš„æ¸²æŸ“å‡½æ•°ï¼Œæ— çŠ¶æ€ã€æ•°æ®æ¥æºäºŽå¤–éƒ¨ã€‚é‚£ä¹ˆå¦‚ä½•ç»™ç»„ä»¶æ·»åŠ æœ¬åœ°çŠ¶æ€ï¼Œä»¥åŠå„ç§ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„ä¸šåŠ¡é€»è¾‘å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šé€šè¿‡ Hooksã€‚React å›¢é˜Ÿå¸Œæœ›æœªæ¥ã€Œå‡½æ•°å¼ç»„ä»¶ + Hooksã€æˆä¸ºå¼€å‘ç»„ä»¶çš„ä¸»è¦æ–¹å¼ï¼Œé‚£ä¹ˆ Hooks åº”è¯¥æœ‰èƒ½åŠ›ä¾µå…¥ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸ªçŽ¯èŠ‚ï¼Œä»¥ä¾¿ä¸ºç»„ä»¶æ·»åŠ çŠ¶æ€ä¸Žè¡Œä¸ºã€‚è™½ç„¶ç›®å‰ React æä¾›çš„ Hooks è¿˜ä¸å¤Ÿä¸°å¯Œï¼ŒåŽç»­ä¼šé€æ¸å®Œå–„ã€‚")]),t._v(" "),a("p",[t._v("ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å‘çŽ°ï¼ŒHooks å¯ä»¥ä½¿æˆ‘ä»¬æ¨¡å—åŒ–å¼€å‘çš„ç²’åº¦æ›´ç»†ï¼Œæ›´å‡½æ•°å¼ã€‚ç»„ä»¶çš„åŠŸèƒ½å˜æˆäº†ç”± Hooks ä¸€ç‚¹ç‚¹åœ°è£…é…èµ·æ¥ã€‚è¿™æ ·çš„ç‰¹æ€§ï¼Œä¹Ÿè§£å†³äº†ä¸Šé¢æåˆ°çš„4ä¸ªç—›ç‚¹ï¼šä»£ç å¤ç”¨ã€å¤§ç»„ä»¶ã€ç»„ä»¶æ ‘è¿‡æ·±ã€ç±»ç»„ä»¶é—®é¢˜ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("å…³äºŽ React Hooks çš„èƒŒæ™¯åŠè¯¸å¤šç¤ºä¾‹ï¼Œè¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"https://reactjs.org/docs/hooks-intro.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Introducing Hooks"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("å¯¹äºŽ Vue ï¼Œé™¤äº† useStateã€useEffectã€useRef ä¸Ž React Hooks API ä¸€è‡´å¤–ï¼Œè¿˜å¯ä»¥å®žçŽ° useComputedã€useMountedã€useUpdatedã€useWatch ç­‰å†…ç½® Hooksï¼Œä»¥ä¾¿èƒ½å¤Ÿæ›´ç»†è‡´åœ°ä¸ºç»„ä»¶æ·»åŠ åŠŸèƒ½ã€‚")]),t._v(" "),t._m(6),t._v(" "),a("p",[t._v("è¿™é‡Œåˆ†æžä¸€ä¸‹ "),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("å°¤å¤§çš„Hooks POC of Vue"),a("OutboundLink")],1),t._v(" çš„æºç å®žçŽ°ï¼Œä»¥ä¾¿åŠ æ·±å¯¹ Hooks API çš„ç†è§£ã€‚")]),t._v(" "),t._m(7),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“ React Hooks åªèƒ½åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ï¼ŒVue ä¸­ä¹Ÿè¦è¿™æ ·å®šä¹‰ã€‚")]),t._v(" "),a("p",[t._v("withHooks ç”¨äºŽåŒ…è£…ä¸€ä¸ª Vue ç‰ˆçš„ã€Œå‡½æ•°å¼ç»„ä»¶ã€ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Hooks APIã€‚")]),t._v(" "),t._m(8),t._v(" "),t._m(9),a("p",[t._v("ä»£ç ä¸­ withHooks åŒ…è£…äº†ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶(æ¸²æŸ“å‡½æ•°)ï¼Œé€šè¿‡ Hooks ä¸ºç»„ä»¶æ·»åŠ äº†ä¸€ä¸ªæœ¬åœ°çŠ¶æ€ dataï¼ŒåŠä¸€ä¸ªè®¡ç®—å±žæ€§ doubleã€‚")]),t._v(" "),a("p",[t._v("æ³¨æ„ï¼šä»£ç ä¸­çš„ useData ä¸Ž useState ç±»ä¼¼ï¼Œä¸‹æ–‡ä¼šè§£é‡Šã€‚")]),t._v(" "),t._m(10),t._v(" "),t._m(11),a("p",[t._v("ä»£ç ä¸­ï¼š")]),t._v(" "),a("p",[t._v("withHooks ä¸ºç»„ä»¶æ·»åŠ äº†ä¸€ä¸ªç§æœ‰æœ¬åœ°çŠ¶æ€ _stateï¼Œç”¨äºŽå­˜å‚¨ useStateã€useData æ‰€å…³è”çš„çŠ¶æ€å€¼ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ created ä¸­ï¼Œä¸ºç»„ä»¶æ³¨å…¥äº†ä¸€äº›æ”¯æŒ Hooks ( useEffectã€useRefã€useComputed ) æ‰€éœ€è¦çš„å­˜å‚¨ç±»å¯¹è±¡ã€‚")]),t._v(" "),a("p",[t._v("é‡ç‚¹æ˜¯ä»£ç ä¸­çš„ render å‡½æ•°ï¼š")]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),a("p",[t._v("useState ç”¨äºŽä¸ºç»„ä»¶æ·»åŠ ä¸€ä¸ªå“åº”å¼çš„æœ¬åœ°çŠ¶æ€ï¼ŒåŠè¯¥çŠ¶æ€ç›¸å…³çš„æ›´æ–°å™¨ã€‚")]),t._v(" "),a("p",[t._v("æ–¹æ³•ç­¾åä¸ºï¼š")]),t._v(" "),t._m(14),t._v(" "),a("p",[t._v("setState ç”¨äºŽæ›´æ–°çŠ¶æ€ï¼š")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),a("p",[t._v("ä»£ç ä¸­ï¼Œé€šè¿‡ useState ä¸ºç»„ä»¶æ·»åŠ äº†ä¸€ä¸ªæœ¬åœ°çŠ¶æ€ count ä¸Žæ›´æ–°çŠ¶æ€å€¼ç”¨çš„å‡½æ•° setCountã€‚")]),t._v(" "),t._m(18),t._v(" "),t._m(19),a("p",[t._v("ä»¥ä¸Šä»£ç ï¼Œå¾ˆæ¸…æ™°åœ°æè¿°äº† useState æ˜¯åœ¨ç»„ä»¶ä¸­åˆ›å»ºäº†ä¸€ä¸ªæœ¬åœ°å“åº”å¼çŠ¶æ€ï¼Œå¹¶ç”Ÿæˆäº†ä¸€ä¸ªçŠ¶æ€æ›´æ–°å™¨ã€‚")]),t._v(" "),a("p",[t._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼š")]),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),a("p",[t._v("useEffect ç”¨äºŽæ·»åŠ ç»„ä»¶çŠ¶æ€æ›´æ–°åŽï¼Œéœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨é€»è¾‘ã€‚")]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),a("p",[t._v("useEffect æŒ‡å®šçš„å‰¯ä½œç”¨é€»è¾‘ï¼Œä¼šåœ¨ç»„ä»¶æŒ‚è½½åŽæ‰§è¡Œä¸€æ¬¡ã€åœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åŽæ ¹æ®æŒ‡å®šçš„ä¾èµ–æœ‰é€‰æ‹©åœ°æ‰§è¡Œã€å¹¶åœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œæ¸…ç†é€»è¾‘(å¦‚æžœæŒ‡å®šäº†çš„è¯)ã€‚")]),t._v(" "),t._m(24),t._v(" "),t._m(25),a("p",[t._v("ä»£ç ä¸­ï¼Œé€šè¿‡ useEffect ä½¿æ¯å½“ count çš„çŠ¶æ€å€¼å˜åŒ–æ—¶ï¼Œéƒ½ä¼šé‡ç½® document.titleã€‚")]),t._v(" "),a("p",[t._v("æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰æŒ‡å®š useEffect çš„ç¬¬äºŒä¸ªå‚æ•° depsï¼Œè¡¨ç¤ºåªè¦ç»„ä»¶é‡æ–°æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ useEffect æŒ‡å®šçš„é€»è¾‘ï¼Œä¸é™åˆ¶å¿…é¡»æ˜¯ count å˜åŒ–æ—¶ã€‚")]),t._v(" "),a("p",[t._v("useEffect è¯¦ç»†çš„å‚æ•°è¯´æ˜Žï¼Œè¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"https://reactjs.org/docs/hooks-effect.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Using the Effect Hook"),a("OutboundLink")],1)]),t._v(" "),t._m(26),t._v(" "),t._m(27),a("p",[t._v("ä»£ç ä¸­ï¼Œé€šè¿‡ useEffect æŽ§åˆ¶åœ¨çª—å£æ”¹å˜æ—¶é‡æ–°èŽ·å–å…¶å®½åº¦ã€‚")]),t._v(" "),a("p",[t._v("useEffect ç¬¬ä¸€ä¸ªå‚æ•°çš„è¿”å›žå€¼ï¼Œå¦‚æžœæ˜¯å‡½æ•°çš„è¯ï¼Œåˆ™å®šä¹‰å…¶ä¸ºæ¸…ç†é€»è¾‘ã€‚æ¸…ç†é€»è¾‘ä¼šåœ¨ç»„ä»¶éœ€è¦é‡æ–°æ‰§è¡Œ useEffect é€»è¾‘ä¹‹å‰ï¼Œæˆ–ç»„ä»¶è¢«é”€æ¯æ—¶æ‰§è¡Œã€‚")]),t._v(" "),a("p",[t._v("è¿™é‡Œåœ¨ useEffect é€»è¾‘ä¸­ï¼Œä¸º window å¯¹è±¡æ·»åŠ äº† resize äº‹ä»¶ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ç»„ä»¶é”€æ¯æ—¶æˆ–éœ€è¦é‡æ–°æ‰§è¡Œè¯¥å‰¯ä½œç”¨é€»è¾‘æ—¶ï¼Œå…ˆæŠŠ resize äº‹ä»¶æ³¨é”€æŽ‰ï¼Œä»¥é¿å…ä¸å¿…è¦çš„äº‹ä»¶å¤„ç†ã€‚")]),t._v(" "),a("p",[t._v("æ³¨æ„ï¼Œè¿™é‡Œ useEffect çš„ç¬¬äºŒä¸ªå‚æ•°çš„å€¼æ˜¯ []ï¼Œè¡¨æ˜Žæ— ä¾èµ–é¡¹ï¼Œå‰¯ä½œç”¨é€»è¾‘åªåœ¨ç»„ä»¶ mounted æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å¤„ç†ä¹Ÿç¬¦åˆè¿™é‡Œçš„ä¸Šä¸‹æ–‡åœºæ™¯ã€‚")]),t._v(" "),t._m(28),t._v(" "),t._m(29),a("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼ŒuseEffect çš„å®žçŽ°æ¯”è¾ƒç²¾å·§ï¼Œæ¶‰åŠåˆ°äº†ç»„ä»¶çš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸï¼šmountedã€updatedã€destroyedï¼Œå‰¯ä½œç”¨é€»è¾‘çš„æ‰§è¡Œç»†èŠ‚ç”±å‚æ•° deps æŽ§åˆ¶ï¼š")]),t._v(" "),t._m(30),t._v(" "),a("p",[t._v("é€šè¿‡å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º useEffect æŒ‡å®š 3 ç§ä¿¡æ¯ï¼š")]),t._v(" "),t._m(31),t._v(" "),a("p",[t._v("å…¶ä¸­ï¼Œæ¸…ç†é€»è¾‘ï¼Œä¼šåœ¨ 2 ç§æƒ…å†µä¸‹æ‰§è¡Œï¼š")]),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),a("p",[t._v("ç›¸å½“äºŽä¸ºç»„ä»¶æ·»åŠ ä¸€ä¸ªæœ¬åœ°å˜é‡ï¼ˆéžç»„ä»¶çŠ¶æ€ï¼‰ã€‚")]),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),a("p",[t._v("ä»£ç ä¸­ï¼ŒuseRef æŒ‡å®šçš„åˆå§‹å€¼ï¼Œè¿žåŒç»„ä»¶æœ¬èº«çš„ refs å®šä¹‰ï¼Œè¢«å­˜å‚¨åˆ°äº†å†…éƒ¨å¯¹è±¡ _refsStore ä¸­ã€‚åœ¨ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ä¸­ï¼Œéšæ—¶å¯æ‹¿åˆ° ref å¯¹è±¡ï¼šrefContainerï¼ŒèŽ·å–æˆ–ä¿®æ”¹å…¶ä¸­çš„ current å±žæ€§ã€‚")]),t._v(" "),t._m(38),t._v(" "),a("p",[t._v("useData ä¸Ž useState ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼ŒuseData ä¸æä¾›æ›´æ–°å™¨ã€‚")]),t._v(" "),t._m(39),t._v(" "),t._m(40),t._m(41),t._v(" "),a("p",[t._v("æ·»åŠ éœ€è¦åœ¨ mounted äº‹ä»¶ä¸­æ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),t._m(42),t._v(" "),t._m(43),a("p",[t._v("è¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œä¸Šæ–‡ä¸­æåˆ°ï¼Œå¦‚æžœ useEffect çš„å‚æ•° deps æŒ‡å®šä¸ºç©ºæ•°ç»„çš„è¯ï¼Œfn å°±ä¸åœ¨ updated åŽæ‰§è¡Œäº† -- å³ä»…åœ¨ mounted æ—¶æ‰§è¡Œä¸€æ¬¡.")]),t._v(" "),t._m(44),t._v(" "),a("p",[t._v("æ·»åŠ éœ€è¦åœ¨ destroyed é˜¶æ®µæ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),t._m(45),t._v(" "),t._m(46),a("p",[t._v("ä¸Šæ–‡ä¸­æåˆ° useEffect ç¬¬ä¸€ä¸ªå‚æ•°çš„è¿”å›žå€¼ï¼Œå¦‚æžœæ˜¯å‡½æ•°çš„è¯ï¼Œä¼šåœ¨ destroyed é˜¶æ®µä½œä¸ºæ¸…ç†é€»è¾‘æ‰§è¡Œã€‚")]),t._v(" "),a("p",[t._v("è¿™é‡Œï¼Œé€šè¿‡è®¾ç½®å‚æ•° deps çš„å€¼ä¸ºç©ºæ•°ç»„ï¼Œå¹¶æŠŠ fn æŒ‡å®šä¸º useEffect çš„å‰¯ä½œç”¨é€»è¾‘çš„è¿”å›žå€¼ï¼Œé¿å…äº† fn åœ¨ç»„ä»¶æ›´æ–°æ—¶è¢«æ‰§è¡Œï¼Œä½¿ fn ä»…åœ¨ destroyed é˜¶æ®µæ‰§è¡Œã€‚")]),t._v(" "),t._m(47),t._v(" "),a("p",[t._v("æ·»åŠ éœ€è¦åœ¨ç»„ä»¶æ›´æ–°åŽæ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),t._m(48),t._v(" "),t._m(49),a("p",[t._v("ä¹Ÿæ˜¯é€šè¿‡ useEffect å®žçŽ°ï¼Œé€šè¿‡ useRef å£°æ˜Žä¸€ä¸ªæ ‡å¿—å˜é‡ï¼Œé¿å… useEffect çš„å‰¯ä½œç”¨é€»è¾‘åœ¨ mounted ä¸­æ‰§è¡Œã€‚")]),t._v(" "),t._m(50),t._v(" "),a("p",[t._v("ä¸ºç»„ä»¶æ·»åŠ  watch.")]),t._v(" "),t._m(51),t._v(" "),t._m(52),a("p",[t._v("ç›´æŽ¥é€šè¿‡ç»„ä»¶å®žä¾‹çš„ $watch æ–¹æ³•å®žçŽ°ã€‚")]),t._v(" "),t._m(53),t._v(" "),a("p",[t._v("ä¸ºç»„ä»¶æ·»åŠ  computed å±žæ€§ã€‚")]),t._v(" "),t._m(54),t._v(" "),t._m(55),a("p",[t._v("è¿™é‡ŒæŠŠè®¡ç®—å±žæ€§çš„å€¼å­˜å‚¨åœ¨äº†å†…éƒ¨å¯¹è±¡ _computedStore ä¸­ã€‚æœ¬è´¨ä¸Šï¼Œä¹Ÿæ˜¯é€šè¿‡ç»„ä»¶å®žä¾‹çš„ $watch å®žçŽ°ã€‚")]),t._v(" "),t._m(56),t._v(" "),a("p",[t._v("è¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("POC of vue-hooks"),a("OutboundLink")],1)]),t._v(" "),t._m(57),t._v(" "),a("p",[t._v("ç†Ÿæ‚‰äº† Hooks å‡ºçŽ°çš„èƒŒæ™¯ã€Hooks å®šä¹‰ã€ä»¥åŠåœ¨ React/Vue ä¸­çš„å®žçŽ°åŽï¼ŒåŸºæœ¬ä¸Šå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Hooks å¦‚æžœå¹¿æ³›åº”ç”¨çš„è¯ï¼Œå°†ä¼šå¤§å¹…åœ°æ”¹å˜äº†æˆ‘ä»¬å¼€å‘ç»„ä»¶çš„æ–¹å¼ã€‚")]),t._v(" "),a("li",[t._v("é€šè¿‡ Hooksï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ‡å…¥ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªçŽ¯èŠ‚ï¼Œä¸ºå‡½æ•°å¼çš„çº¯ç»„ä»¶è£…é…çŠ¶æ€ä¸Žè¡Œä¸ºã€‚æ¨¡å—åŒ–ç²’åº¦æ›´ç»†äº†ï¼Œä»£ç å¤ç”¨åº¦é«˜ï¼Œä¹Ÿæ›´é«˜å†…èšæ¾è€¦åˆäº†ã€‚")]),t._v(" "),a("li",[t._v("Hooks API æ˜¯ä¸ªä¸­ç«‹çš„æ¦‚å¿µï¼Œä¹Ÿå¯ä»¥åœ¨ Vueã€æˆ–å…¶å®ƒç»„ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œå¦‚ï¼š"),a("a",{attrs:{href:"https://github.com/matthewp/haunted",target:"_blank",rel:"noopener noreferrer"}},[t._v("React's Hooks API implemented for web components"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("ä»¥ã€Œçº¯ç»„ä»¶ + Hooksã€çš„æ–¹å¼å¼€å‘ç»„ä»¶ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šå‘Šåˆ«äº†æ‰æ‘¸ä¸å®šçš„ thisï¼Œä»£ç æ›´å‡½æ•°å¼äº†ã€‚æœªæ¥ä¹Ÿæ–¹ä¾¿æ›´è¿›ä¸€æ­¥åœ°ä½¿ç”¨å‡½æ•°å¼çš„æŸ¯é‡ŒåŒ–ã€ç»„åˆã€æƒ°æ€§è®¡ç®—ç­‰è¯¸å¤šä¼˜åŠ¿ï¼Œç¼–å†™æ›´ç®€æ´å¥å£®çš„ä»£ç ã€‚")]),t._v(" "),a("li",[t._v("é€šè¿‡ Hooksï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡é€»è¾‘çš„ç›¸å…³æ€§ç»„ç»‡ä»£ç æ¨¡å—ï¼Œæ‘†è„±äº†ç±»ç»„ä»¶æ ¼å¼çš„é™åˆ¶ã€‚")]),t._v(" "),a("li",[t._v("Hooks è¿˜å¤„äºŽæ—©æœŸé˜¶æ®µï¼Œä½†æ˜¯ç»™æˆ‘ä»¬å¼€å‘ç»„ä»¶æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„æ€è·¯ï¼Œå¤§å®¶å¯ä»¥åœ¨ react-16.7.0-alpha.0 ä¸­ä½“éªŒã€‚")])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"hooks-api-åœ¨-vue-ä¸­çš„å®žçŽ°åˆ†æž"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-api-åœ¨-vue-ä¸­çš„å®žçŽ°åˆ†æž","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks API åœ¨ Vue ä¸­çš„å®žçŽ°åˆ†æž")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("è·¨ç»„ä»¶ä»£ç ï¼Œéš¾ä»¥å¤ç”¨ã€‚")]),this._v(" "),s("li",[this._v("å¤§ç»„ä»¶ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚")]),this._v(" "),s("li",[this._v("ç»„ä»¶æ ‘å±‚çº§ï¼Œå¾€å¾€åµŒå¥—å¾ˆæ·±ã€‚")]),this._v(" "),s("li",[this._v("ç±»ç»„ä»¶ï¼Œä¸å®¹æ˜“ç†è§£ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooks-æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-æ˜¯ä»€ä¹ˆ","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks æ˜¯ä»€ä¹ˆ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("The term hooking covers a range of techniques used to alter or augment the behavior of an operating system, of applications, or of other software components by intercepting function calls or messages or events passed between software components. Code that handles such intercepted function calls, events or messages is called a hook.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("useState -- ä¸ºç»„ä»¶æ·»åŠ æœ¬åœ°å“åº”å¼çŠ¶æ€ã€‚")]),this._v(" "),s("li",[this._v("useEffect -- ä¸ºç»„ä»¶æ·»åŠ çŠ¶æ€æ›´æ–°åŽï¼Œéœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨é€»è¾‘ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooks-api-çš„-vue-å®žçŽ°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-api-çš„-vue-å®žçŽ°","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks API çš„ Vue å®žçŽ°")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"withhooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#withhooks","aria-hidden":"true"}},[this._v("#")]),this._v(" withHooks")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("withHooks ä½¿ç”¨ç¤ºä¾‹ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" withHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useComputed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-hooks"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" double "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useComputed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`count is ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`double count is ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("double"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'count++'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("withHooks å®žçŽ°ç»†èŠ‚ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" currentInstance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" isMounting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" callIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`invalid hooks call: hooks can only be called in a function passed to withHooks.`")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        _state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_refsStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_computedStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      callIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n      currentInstance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n      isMounting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_vnode\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$attrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      currentInstance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ret\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("callIndexï¼Œä¸º Hooks ç›¸å…³çš„å­˜å‚¨å¯¹è±¡æä¾› keyã€‚è¿™é‡Œæ¯æ¬¡æ¸²æŸ“ï¼Œéƒ½é‡ç½®ä¸º 0ï¼Œæ˜¯ä¸ºäº†èƒ½å¤Ÿæ ¹æ®è°ƒç”¨æ¬¡åºåŒ¹é…å¯¹åº”çš„ Hooksã€‚è¿™æ ·å¤„ç†ä¹Ÿé™åˆ¶äº† Hooks åªèƒ½åœ¨é¡¶çº§ä»£ç ä¸­è°ƒç”¨ã€‚")]),this._v(" "),s("li",[this._v("currentInstanceï¼Œç»“åˆ ensureCurrentInstance å‡½æ•°ï¼Œç”¨äºŽç¡®ä¿ Hooks åªèƒ½åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ã€‚")]),this._v(" "),s("li",[this._v("isMountingï¼Œç”¨äºŽæ ‡è¯†ç»„ä»¶çš„æŒ‚è½½çŠ¶æ€")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usestate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usestate","aria-hidden":"true"}},[this._v("#")]),this._v(" useState")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("const [state, setState] = useState(initialState);")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("setState(newState);")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useState ä½¿ç”¨ç¤ºä¾‹ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" withHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-hooks"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"span"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`count is: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"button"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useState å®žçŽ°ç»†èŠ‚:")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŽ·å–ç»„ä»¶å®žä¾‹çš„æœ¬åœ°çŠ¶æ€ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_state\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ¬åœ°çŠ¶æ€æ›´æ–°å™¨ï¼Œä»¥è‡ªå¢židä¸ºé”®å€¼ï¼Œå­˜å‚¨åˆ°æœ¬åœ°çŠ¶æ€ä¸­ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("updater")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡$setä¿è¯å…¶æ˜¯å“åº”å¼çŠ¶æ€ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›žå“åº”å¼çŠ¶æ€ä¸Žæ›´æ–°å™¨ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("å‡½æ•° ensureCurrentInstance æ˜¯ä¸ºäº†ç¡®ä¿ useState å¿…é¡»åœ¨ render ä¸­æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯é™åˆ¶äº†å¿…é¡»åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­æ‰§è¡Œã€‚")]),this._v(" "),s("li",[this._v("ä»¥ callIndex ç”Ÿæˆçš„è‡ªå¢ž id ä½œä¸ºå­˜å‚¨çŠ¶æ€å€¼çš„ keyã€‚è¯´æ˜Ž useState éœ€è¦ä¾èµ–ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶çš„è°ƒç”¨é¡ºåºæ¥åŒ¹é…è¿‡åŽ»çš„ stateï¼ˆæ¯æ¬¡æ¸²æŸ“ callIndex éƒ½è¦é‡ç½®ä¸º0ï¼‰ã€‚è¿™ä¹Ÿé™åˆ¶äº† useState å¿…é¡»åœ¨é¡¶å±‚ä»£ç ä¸­ä½¿ç”¨ã€‚")]),this._v(" "),s("li",[this._v("å…¶å®ƒ hooks ä¹Ÿå¿…é¡»éµå¾ªä»¥ä¸Šä¸¤ç‚¹ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useeffect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useeffect","aria-hidden":"true"}},[this._v("#")]),this._v(" useEffect")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("æ–¹æ³•ç­¾åï¼š")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("void useEffect(rawEffect, deps)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("è°ƒç”¨ç¤ºä¾‹ 1ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" withHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-hooks"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count is "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" count\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"span"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`count is: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"button"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("è°ƒç”¨ç¤ºä¾‹ 2ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" withHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-hooks"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleResize")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resize"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleResize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resize"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleResize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`window width is: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useEffect å®žçŽ°ç»†èŠ‚:")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶æŒ‚è½½å‰ï¼Œé‡æ–°åŒ…è£…ã€Œæ¸…ç†é€»è¾‘ã€ä¸Žã€Œå‰¯ä½œç”¨é€»è¾‘ã€ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" current "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cleanup\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("current")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¸…ç†é€»è¾‘æ‰§è¡Œå®Œï¼Œåˆ™é‡ç½®å›ž nullï¼›")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æžœå‰¯ä½œç”¨é€»è¾‘äºŒæ¬¡æ‰§è¡Œï¼Œcleanup.current ä¼šè¢«é‡æ–°èµ‹å€¼ã€‚")]),t._v("\n        cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("effect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" current "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" effect\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rawEffect çš„è¿”å›žå€¼ï¼Œå¦‚æžœæ˜¯ä¸€ä¸ªå‡½æ•°çš„è¯ï¼Œåˆ™å®šä¹‰ä¸º useEffectå‰¯ä½œç”¨ çš„æ¸…ç†å‡½æ•°ã€‚")]),t._v("\n        cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("current")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rawEffect æ‰§è¡Œå®Œï¼Œåˆ™é‡ç½®ä¸º nullï¼›")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æžœç›¸å…³çš„ deps å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦äºŒæ¬¡æ‰§è¡Œ rawEffect æ—¶ effect.current ä¼šè¢«é‡æ–°èµ‹å€¼ã€‚")]),t._v("\n        effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawEffect\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ç»„ä»¶å®žä¾‹ä¸Šï¼Œå­˜å‚¨ useEffect ç›¸å…³è¾…åŠ©æˆå‘˜ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      deps\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶å®žä¾‹ mounted æ—¶ï¼Œæ‰§è¡Œ useEffect é€»è¾‘ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:mounted'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶å®žä¾‹ destroyed æ—¶ï¼Œæ‰§è¡Œ useEffect ç›¸å…³æ¸…ç†é€»è¾‘ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:destroyed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥æœªæŒ‡å®šä¾èµ–é¡¹æˆ–å­˜åœ¨æ˜Žç¡®çš„ä¾èµ–é¡¹æ—¶ï¼Œç»„ä»¶å®žä¾‹ updated åŽï¼Œæ‰§è¡Œ useEffect é€»è¾‘ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥æŒ‡å®šä¾èµ–é¡¹ä¸º [], åˆ™ useEffect åªä¼šåœ¨ mounted æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:updated'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" record "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevDeps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" record\n    record"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deps\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("some")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" prevDeps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥ä¾èµ–çš„çŠ¶æ€å€¼æœ‰å˜åŠ¨æ—¶ï¼Œåœ¨å‰¯ä½œç”¨é‡æ–°æ‰§è¡Œå‰ï¼Œæ‰§è¡Œæ¸…ç†é€»è¾‘ã€‚")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useEffect æ‰§è¡Œå®Œæ¯•åŽï¼Œä¼šå°† current çš„å±žæ€§ç½®ä¸º null. è¿™é‡Œä¸º effect.current é‡æ–°èµ‹å€¼ï¼Œ")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ˜¯ä¸ºäº†åœ¨ updated åŽæ‰§è¡Œ rawEffect é€»è¾‘ã€‚")]),t._v("\n      effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawEffect\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("mounted æ—¶ï¼Œå›ºå®šåœ°æ‰§è¡Œä¸€æ¬¡ã€‚")]),this._v(" "),s("li",[this._v("å¦‚æžœ deps æœªæŒ‡å®šï¼Œåˆ™æ¯æ¬¡ updated åŽéƒ½æ‰§è¡Œä¸€æ¬¡ã€‚")]),this._v(" "),s("li",[this._v("å¦‚æžœ deps ä¸ºç©ºæ•°ç»„ï¼Œåˆ™ updated åŽä¸æ‰§è¡Œã€‚")]),this._v(" "),s("li",[this._v("å¦‚æžœ deps æŒ‡å®šäº†ä¾èµ–é¡¹ï¼Œåˆ™å½“ç›¸åº”çš„ä¾èµ–é¡¹çš„å€¼æ”¹å˜æ—¶ï¼Œæ‰§è¡Œä¸€æ¬¡ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("rawEffect - å‰¯ä½œç”¨é€»è¾‘å†…å®¹ã€‚")]),this._v(" "),s("li",[this._v("æ¸…ç†é€»è¾‘ - é€šè¿‡ rawEffect çš„è¿”å›žå€¼å®šä¹‰ã€‚")]),this._v(" "),s("li",[this._v("ä¾èµ– - å®šä¹‰ä½•æ—¶éœ€è¦é‡å¤æ‰§è¡Œå‰¯ä½œç”¨é€»è¾‘ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("rawEffect éœ€è¦é‡å¤æ‰§è¡Œä¹‹å‰ï¼Œæ¸…ç†ä¸Šæ¬¡è¿è¡Œæ‰€å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚")]),this._v(" "),s("li",[this._v("ç»„ä»¶é”€æ¯æ—¶ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useref","aria-hidden":"true"}},[this._v("#")]),this._v(" useRef")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("æ–¹æ³•ç­¾åï¼š")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("const refContainer = useRef(initialValue)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useRef å®žçŽ°ç»†èŠ‚ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" _refsStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" refs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" isMounting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("refs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" initial\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    refs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usedata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usedata","aria-hidden":"true"}},[this._v("#")]),this._v(" useData")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useData å®žçŽ°ç»†èŠ‚ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_state\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usemounted"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usemounted","aria-hidden":"true"}},[this._v("#")]),this._v(" useMounted")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useMounted å®žçŽ°ç»†èŠ‚ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usedestroyed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usedestroyed","aria-hidden":"true"}},[this._v("#")]),this._v(" useDestroyed")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useDestroyed å®žçŽ°ç»†èŠ‚ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDestroyed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useupdated"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useupdated","aria-hidden":"true"}},[this._v("#")]),this._v(" useUpdated")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useUpdated å®žçŽ°ç»†èŠ‚ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useUpdated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isMount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ useRef ç”Ÿæˆä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      isMount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·³è¿‡ mounted.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usewatch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usewatch","aria-hidden":"true"}},[this._v("#")]),this._v(" useWatch")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useWatch å®žçŽ°ç»†èŠ‚ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$watch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usecomputed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecomputed","aria-hidden":"true"}},[this._v("#")]),this._v(" useComputed")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("useComputed å®žçŽ°ç»†èŠ‚ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useComputed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_computedStore\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$watch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      val "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" val "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"å®Œæ•´ä»£ç åŠç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®Œæ•´ä»£ç åŠç¤ºä¾‹","aria-hidden":"true"}},[this._v("#")]),this._v(" å®Œæ•´ä»£ç åŠç¤ºä¾‹")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"ç»“è®º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è®º","aria-hidden":"true"}},[this._v("#")]),this._v(" ç»“è®º")])}],!1,null,null,null);e.options.__file="hooks-and-vue.md";s.default=e.exports}}]);