(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{170:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("åˆæ¬¡å¬åˆ° React Hooksï¼Œæ˜¯åœ¨å…¶åˆšå‘å¸ƒçš„é‚£å‡ å¤©ï¼Œç½‘ä¸Šé“ºå¤©ç›–åœ°çš„æ–‡ç« ä»‹ç»å®ƒã€‚çœ‹å­—é¢æ„æ€æ˜¯ â€˜React é’©å­â€™ï¼Œå°±æƒ³å½“ç„¶åœ°ç†è§£åº”è¯¥æ˜¯ä¿®æ”¹ React ç»„ä»¶çš„é’©å­å§ã€‚React å»¶ä¼¸çš„æ¦‚å¿µéžå¸¸å¤šï¼Œé«˜é˜¶ç»„ä»¶ã€å‡½æ•°å¼ã€Render Propsã€Contextã€ç­‰ç­‰ã€‚åˆæ¥äº†ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œå‰ç«¯å¼€å‘å·²ç»å¤Ÿå¤æ‚äº†ï¼Œæˆ‘å¿ƒé‡Œè¿™æ ·æƒ³ç€ã€‚è¿‘ä¸¤å¹´ä¸€ç›´ç”¨ Vueï¼Œè§‰å¾— React çš„è¯¸å¤šç‰¹æ€§ï¼Œåœ¨ Vue ä¸­ä¹Ÿéƒ½æœ‰ç±»ä¼¼çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç«‹å³åŽ»äº†è§£å®ƒã€‚")]),t._v(" "),a("p",[t._v("åŽæ¥çœ‹åˆ°å°¤å¤§åœ¨"),a("a",{attrs:{href:"https://www.bilibili.com/video/av36787459/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue 3.0 æœ€è¿‘è¿›å±•"),a("OutboundLink")],1),t._v("çš„è§†é¢‘ä¸­ä¹Ÿæåˆ°äº† Hooks APIï¼Œå¹¶å†™äº†ä¸€ä¸ªåœ¨ "),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue ä¸­ä½¿ç”¨ Hooks çš„ POC"),a("OutboundLink")],1),t._v("ã€‚çœ‹æ¥ Hooks è¿˜æ˜¯æŒºé‡è¦çš„ï¼ŒäºŽæ˜¯é©¬ä¸Šæ‰¾åˆ° React å®˜æ–¹æ–‡æ¡£ä¸Žå‘å¸ƒä¼šçš„è§†é¢‘ --- åˆä¸€è½®çš„æ¶è¡¥ã€‚")]),t._v(" "),a("p",[t._v("çœ‹äº†ç›¸å…³èµ„æ–™ï¼Œè§‰å¾— Hooks çš„åº”ç”¨å‰æ™¯è¿˜æ˜¯æŒºè¯±äººçš„ï¼Œè§£å†³äº†ç›®å‰å‰ç«¯å¼€å‘ä¸­çš„è¯¸å¤šç—›ç‚¹ã€‚ä¸è¿‡ React Hooks ç›®å‰è¿˜åœ¨ alpha é˜¶æ®µï¼Œä¸å¤ªå®Œå–„ï¼Œå†…ç½® Hooks ä¹Ÿä¸ä¸°å¯Œã€‚è€Œ Vue åªæœ‰ä¸ª Hooks POCï¼ŒVue3.0 å¾ˆå¯èƒ½ä¼šåŠ ä¸Šï¼Œä½†éœ€è¦å†ç­‰å‡ ä¸ªæœˆã€‚æ‰€ä»¥æš‚ä¸å»ºè®®åœ¨æ­£å¼ä»£ç ä¸­ä½¿ç”¨ã€‚")]),t._v(" "),a("p",[t._v("æœ¬ç¯‡æ–‡ç« ç€é‡è§£é‡Šä¸€ä¸‹æˆ‘å¯¹ Hooks çš„ç†è§£ï¼Œä»¥åŠ Hooks API åœ¨ Vue ä¸­çš„æºç å®žçŽ°ã€‚ä¹Ÿè¯´æ˜Žä¸€ä¸‹ Hooks æ˜¯ä¸ªä¸­ç«‹çš„æ¦‚å¿µï¼Œå¯ä»¥åœ¨ä»»ä½•æ¡†æž¶ä¸­ä½¿ç”¨ï¼Œéž React æ‰€ç‹¬æœ‰ ðŸ˜ƒ")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¤è¿°ä¸€ä¸‹ Hooks ä¼šå¸®æˆ‘ä»¬è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("æŒ‰ç…§ Dan çš„è¯´æ³•ï¼ŒReact é¡¹ç›®çš„å¼€å‘ä¸­æœ‰ä»¥ä¸‹å‡ ä¸ªç—›ç‚¹ï¼š")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("å½“ç„¶ Vue é¡¹ç›®ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå…¶å®žè¿™äº›é—®é¢˜ä¹Ÿæ˜¯ç›¸å…³è”çš„ã€‚")]),t._v(" "),a("p",[t._v("ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼Œæˆ‘ä»¬å°†é¡µé¢æ‹†åˆ†æˆä¸åŒçš„ç»„ä»¶ï¼ŒæŒ‰è‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµï¼Œå±‚å±‚åµŒå¥—ã€‚ä»£ç ç»“æž„çš„æœ€å°é¢—ç²’æ˜¯ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æžœæŸäº›ç»„ä»¶å¤ªå¤§ï¼Œæˆ‘ä»¬å°±ç»§ç»­æ‹†åˆ†æˆæ›´å°çš„ç»„ä»¶ï¼Œç„¶åŽåœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨å®ƒã€‚\nå¦‚æžœå¤šç»„ä»¶ä¹‹é—´æœ‰ä¸å°‘é€šç”¨é€»è¾‘ï¼Œæˆ‘ä»¬å°±ç”¨ mixin æˆ– æž„å»ºç»„ä»¶çš„ç»§æ‰¿ä½“ç³»ã€‚")]),t._v(" "),a("p",[t._v("ä½†æ˜¯ç»„ä»¶æ‹†åˆ†ï¼Œä¼šä½¿æˆ‘ä»¬å¾ˆå®¹æ˜“ä¸å°å¿ƒå°±æŠŠç»„ä»¶çš„å±‚çº§æžå¾—å¾ˆæ·±ï¼Œå¢žåŠ ç³»ç»Ÿå¤æ‚åº¦ä¸è¯´ï¼Œæ€§èƒ½ä¹Ÿå¯èƒ½å—åˆ°å½±å“ã€‚å¹¶ä¸”ï¼Œæœ‰äº›ç»„ä»¶çš„äº¤äº’é€»è¾‘ç¡®å®žæ¯”è¾ƒå¤æ‚ï¼Œæ‹†åˆ†ä¸å¾—ï¼Œç³»ç»Ÿé•¿æœŸè¿­ä»£ä¸‹æ¥ï¼Œç´¯ç§¯çš„ä»£ç é‡å¾ˆå¤§ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚")]),t._v(" "),a("p",[t._v("è·¨ç»„ä»¶é€»è¾‘å¤ç”¨æ›´åŠ æ£˜æ‰‹ï¼mixinæ˜¯ä¸€ä¸ªåŒåˆƒå‰‘(å‚è€ƒï¼š"),a("a",{attrs:{href:"https://reactjs.org/blog/2016/07/13/mixins-considered-harmful.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mixin æ˜¯æœ‰å®³çš„"),a("OutboundLink")],1),t._v(")ï¼›ç»„ä»¶ç»§æ‰¿ä¹Ÿä¸å¯å–ï¼Œè™½ç„¶åœ¨å¼ºç±»åž‹çš„é¢å‘å¯¹è±¡è¯­è¨€(å¦‚ï¼šJava/C#)ä¸­ï¼Œç»§æ‰¿ç”¨ç€å¾ˆå¥½ï¼Œä½†åœ¨ JavaScript ä¸­æ€»æ„Ÿåˆ°åŠ›ä¸ä»Žå¿ƒï¼Œä¹Ÿä½¿å¾—ä»£ç æ™¦æ¶©éš¾æ‡‚ï¼›æŠ½å– util åŒ…ä¹Ÿæ˜¯ä¸€ä¸ªæƒ¯ç”¨çš„åšæ³•ï¼Œä½†å¦‚æžœè¦æŠ½å–çš„å…¬ç”¨é€»è¾‘éœ€è¦å…³è”ç»„ä»¶çš„æœ¬åœ°çŠ¶æ€å‘¢ï¼Œå¦‚æžœç›¸å…³è”çš„å…¬ç”¨é€»è¾‘éœ€è¦åˆ†æ•£åœ¨ç»„ä»¶çš„ä¸åŒç”Ÿå‘½å‘¨æœŸä¸­å‘¢ï¼Œå°±æžä¸å®šäº†ï¼è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€å°±å¦¥åäº† --- å¤§ç»„ä»¶/é‡å¤é€»è¾‘äº§ç”Ÿäº†ã€‚")]),t._v(" "),a("p",[t._v("ä¸Šæ–‡æåˆ°ç±»ç»„ä»¶çš„é—®é¢˜ï¼Œè™½ç„¶ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼å»ºæ¨¡ç³»ç»Ÿæ˜¯å¾ˆå¥½çš„åšæ³•ï¼Œä½†æˆ‘ä¸ªäººè§‰å¾—åœ¨ JavaScript ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨åŸºäºŽ React/Vue ç»„ä»¶çš„å¼€å‘ä¸­ï¼Œå¹¶ä¸å¾ˆåˆé€‚ï¼Œå¾ˆå®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬ç»å¸¸éœ€è¦æŠŠå‡½æ•° bind åˆ°æŸä¸ªä¸Šä¸‹æ–‡ï¼Œä»¥ç¡®ä¿ this çš„æ­£ç¡®æŒ‡å‘ã€‚JavaScript çš„è¯­æ³•è¿‡äºŽçµæ´»ï¼Œæˆ‘ä»¬çŸ¥é“ JavaScript çš„åŸºäºŽé™æ€ä½œç”¨åŸŸçš„ï¼Œå°±æ˜¯è¯´ä»Žæºç ä¸Šçœ‹ï¼Œå°±èƒ½å¤ŸæŽ¨æ–­å˜é‡çš„ä½œç”¨åŸŸã€‚ä½† this æ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒæ˜¯åŸºäºŽåŠ¨æ€ä½œç”¨åŸŸçš„ï¼Œå°±æ˜¯è¯´ this çš„å€¼æ˜¯ç”±è°ƒç”¨è€…å†³å®šçš„ã€‚åŒä¸€ä¸ªæ–¹æ³•ï¼Œç”¨ä¸åŒçš„æ–¹å¼è°ƒç”¨ï¼Œå…¶ this æŒ‡å‘å®Œå…¨ä¸ä¸€æ ·ã€‚æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œè¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"http://dmitrysoshnikov.com/ecmascript/chapter-3-this/",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯¦è§£this"),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å¦‚ä½•è§£å†³è¿™äº›ç—›ç‚¹å‘¢ --- Hooks!")]),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("wikipedia ä¸Šå…³äºŽ "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Hooking",target:"_blank",rel:"noopener noreferrer"}},[t._v("hooks"),a("OutboundLink")],1),t._v(" çš„å®šä¹‰æ˜¯ï¼š")]),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("ç¿»è¯‘æˆä¸­æ–‡å«ä¹‰æ˜¯ï¼š")]),t._v(" "),a("p",[t._v("Hooks åŒ…å«äº†ä¸€ç³»åˆ—æŠ€æœ¯ï¼Œç”¨äºŽæ”¹å˜æˆ–å¢žå¼ºæ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€è½¯ä»¶ç»„ä»¶çš„è¡Œä¸ºã€‚è¿™äº›æŠ€æœ¯é€šè¿‡æ‹¦æˆªè½¯ä»¶è¿è¡Œè¿‡ç¨‹ä¸­çš„å‡½æ•°è°ƒç”¨ã€æ¶ˆæ¯ã€äº‹ä»¶æ¥å®žçŽ°ã€‚")]),t._v(" "),a("p",[t._v("å°±æ˜¯è¯´é€šè¿‡ Hooksï¼Œæˆ‘ä»¬èƒ½å¤ŸåŽæœŸæ”¹å˜æˆ–å¢žå¼ºå·²æœ‰ç³»ç»Ÿçš„è¿è¡Œæ—¶è¡Œä¸ºã€‚å¯¹åº”åˆ° React/Vueï¼Œåˆ™ Hooks æ˜¯å¯ä»¥æ”¹å˜æˆ–å¢žå¼ºç»„ä»¶è¿è¡Œæ—¶è¡Œä¸ºçš„ä»£ç æ¨¡å—ã€‚")]),t._v(" "),a("p",[t._v("é€šè¿‡é˜…è¯» React Hooks çš„æŠ€æœ¯æ–‡æ¡£ï¼ŒReact ä¸­å¼ºè°ƒ Hooks åªèƒ½åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ã€‚å‡½æ•°å¼ç»„ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå•çº¯çš„æ¸²æŸ“å‡½æ•°ï¼Œæ— çŠ¶æ€ï¼Œæ•°æ®æ¥æºäºŽå¤–éƒ¨ã€‚é‚£ä¹ˆå¦‚ä½•ç»™ç»„ä»¶æ·»åŠ æœ¬åœ°çŠ¶æ€ï¼Œä»¥åŠå„ç§ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é€»è¾‘å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šé€šè¿‡ Hooksã€‚")]),t._v(" "),a("p",[t._v("React å›¢é˜Ÿå¸Œæœ›æœªæ¥ 'å‡½æ•°å¼ç»„ä»¶ + Hooks' æˆä¸ºå¼€å‘ç»„ä»¶çš„ä¸»è¦æ–¹å¼ï¼Œé‚£ä¹ˆ Hooks åº”è¯¥æœ‰èƒ½åŠ›ä¾µå…¥ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸ªçŽ¯èŠ‚ã€‚è™½ç„¶ç›®å‰ React æä¾›çš„ Hooks è¿˜ä¸å¤Ÿä¸°å¯Œï¼ŒåŽç»­ä¼šé€æ¸å®Œå–„ã€‚")]),t._v(" "),a("p",[t._v("ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å‘çŽ°ï¼ŒHooks å¯ä»¥ä½¿æˆ‘ä»¬æ¨¡å—åŒ–å¼€å‘çš„ç²’åº¦æ›´ç»†ï¼Œæ›´å‡½æ•°å¼ã€‚ç»„ä»¶çš„åŠŸèƒ½å˜æˆäº†ç”± Hooks ä¸€ç‚¹ç‚¹åœ°è£…é…èµ·æ¥ã€‚è¿™æ ·çš„ç‰¹æ€§ï¼Œæ°æ°è§£å†³äº†ä¸Šé¢æåˆ°çš„4ä¸ªç—›ç‚¹ï¼šä»£ç å¤ç”¨ã€å¤§ç»„ä»¶ã€ç»„ä»¶æ ‘è¿‡æ·±ã€ç±»ç»„ä»¶é—®é¢˜ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("æœ¬ç¯‡ç¨å¾®ç†è®ºåŒ–ä¸€ç‚¹ï¼Œå…³äºŽ React Hooks çš„èƒŒæ™¯åŠç¤ºä¾‹ï¼Œè¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"https://reactjs.org/docs/hooks-intro.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Introducing Hooks"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("React æä¾›äº†ä¸¤ä¸ªé‡è¦çš„å†…ç½® Hooks :")]),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("è¿˜æœ‰å…¶å®ƒä¸€äº›ç»„ä»¶ç‰¹æ€§ç›¸å…³çš„ Hooksï¼šuseContextã€useReducerã€useMemoã€useRef ç­‰ç­‰ã€‚æœªæ¥åº”è¯¥ä¼šå‡ºçŽ°æ›´å¤šçš„å†…ç½® Hooksã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åŸºäºŽè¿™äº›å†…ç½® Hooksï¼Œå®žçŽ°è‡ªå·±çš„è‡ªå®šä¹‰ Hooksã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºŽ Vue ï¼Œé™¤äº† useStateã€useEffectã€useRef ä¸Ž React ä¸€è‡´å¤–ï¼Œè¿˜å¯ä»¥å®žçŽ° useComputedã€useMountedã€useUpdatedã€useWatch ç­‰å†…ç½® Hooksï¼Œä»¥ä¾¿èƒ½å¤Ÿæ›´ç»†è‡´åœ°ä¸ºç»„ä»¶æ·»åŠ è¡Œä¸ºã€‚")]),t._v(" "),t._m(6),t._v(" "),a("p",[t._v("è¿™é‡Œè§£æžä¸€ä¸‹"),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("å°¤å¤§çš„Hooks POC of Vue"),a("OutboundLink")],1),t._v(" çš„æºç å®žçŽ°ï¼Œä»¥ä¾¿åŠ æ·±å¯¹ Hooks çš„ç†è§£ã€‚")]),t._v(" "),t._m(7),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“ React Hooks åªèƒ½åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ï¼ŒVue ä¸­ä¹Ÿè¦è¿™æ ·å®šä¹‰ã€‚")]),t._v(" "),a("p",[t._v("withHooks ç”¨äºŽåŒ…è£…ä¸€ä¸ª Vue ç‰ˆçš„å‡½æ•°å¼ç»„ä»¶ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Hooks ç›¸å…³çš„åŠŸèƒ½ã€‚")]),t._v(" "),a("p",[t._v("å¦‚ï¼ŒwithHooks ä½¿ç”¨ç¤ºä¾‹ï¼š")]),t._v(" "),t._m(8),a("p",[t._v("ä»£ç ä¸­ withHooks åŒ…è£…äº†ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶(æ¸²æŸ“å‡½æ•°)ï¼Œå‡½æ•°ä¸­é€šè¿‡ Hooks ä¸ºç»„ä»¶æ·»åŠ äº†ä¸€ä¸ªæœ¬åœ°çŠ¶æ€ dataï¼ŒåŠä¸€ä¸ªè®¡ç®—å±žæ€§ doubleã€‚\næ³¨æ„ï¼šä»£ç ä¸­çš„ useData ä¸Ž useState ç±»ä¼¼ï¼Œä¸‹æ–‡ä¼šè§£é‡Šã€‚")]),t._v(" "),a("p",[t._v("withHooks å®žçŽ°ç»†èŠ‚ï¼š")]),t._v(" "),t._m(9),a("p",[t._v("ä»£ç ä¸­ï¼š")]),t._v(" "),a("p",[t._v("withHooks ä¸ºç»„ä»¶æ·»åŠ äº†ä¸€ä¸ªç§æœ‰æœ¬åœ°çŠ¶æ€ _stateï¼Œç”¨äºŽå­˜å‚¨ useState/useData æ‰€å…³è”çš„çŠ¶æ€å€¼ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ created ä¸­ï¼Œä¸ºç»„ä»¶æ³¨å…¥äº†ä¸€äº›æ”¯æŒ Hooks æ‰€éœ€è¦çš„å˜é‡ã€‚")]),t._v(" "),a("p",[t._v("é‡ç‚¹æ˜¯ä»£ç ä¸­çš„ render å‡½æ•°ï¼š")]),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),a("p",[t._v("useState ç”¨äºŽä¸ºç»„ä»¶æ·»åŠ ä¸€ä¸ªå“åº”å¼çš„æœ¬åœ°çŠ¶æ€ï¼ŒåŠè¯¥çŠ¶æ€ç›¸å…³çš„æ›´æ–°å™¨ã€‚")]),t._v(" "),a("p",[t._v("æ–¹æ³•ç­¾åä¸ºï¼š")]),t._v(" "),t._m(12),t._v(" "),a("p",[t._v("setState ç”¨äºŽæ›´æ–°çŠ¶æ€ï¼š")]),t._v(" "),t._m(13),t._v(" "),a("p",[t._v("å¦‚ï¼ŒuseState ä½¿ç”¨ç¤ºä¾‹ï¼š")]),t._v(" "),t._m(14),a("p",[t._v("ä»£ç ä¸­ï¼Œé€šè¿‡ useState ä¸ºç»„ä»¶æ·»åŠ äº†ä¸€ä¸ªæœ¬åœ°çŠ¶æ€ count ä¸Žæ›´æ–°çŠ¶æ€å€¼ç”¨çš„å‡½æ•° setCountã€‚")]),t._v(" "),a("p",[t._v("useState å®žçŽ°ç»†èŠ‚:")]),t._v(" "),t._m(15),a("p",[t._v("ä»¥ä¸Šä»£ç å¾ˆæ¸…æ™°åœ°æè¿°äº† useState æ˜¯åœ¨ç»„ä»¶ä¸­åˆ›å»ºäº†ä¸€ä¸ªæœ¬åœ°çš„å“åº”å¼çŠ¶æ€ï¼Œå¹¶ç”Ÿæˆäº†ä¸€ä¸ªçŠ¶æ€æ›´æ–°å™¨ã€‚")]),t._v(" "),a("p",[t._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼š")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),a("p",[t._v("useEffect ç”¨äºŽæ·»åŠ ç»„ä»¶çŠ¶æ€æ›´æ–°åŽï¼Œéœ€è¦æ‰§è¡Œä¸€äº›å‰¯ä½œç”¨é€»è¾‘ã€‚")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),a("p",[t._v("useEffect æŒ‡å®šçš„å‰¯ä½œç”¨é€»è¾‘ï¼Œä¼šåœ¨ç»„ä»¶æŒ‚è½½åŽæ‰§è¡Œä¸€æ¬¡ã€åœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åŽæ ¹æ®æŒ‡å®šçš„ä¾èµ–æœ‰é€‰æ‹©åœ°æ‰§è¡Œã€å¹¶åœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œæ¸…ç†é€»è¾‘(å¦‚æžœæŒ‡å®šäº†çš„è¯)ã€‚")]),t._v(" "),t._m(20),t._v(" "),t._m(21),a("p",[t._v("ä»£ç ä¸­ï¼Œé€šè¿‡ useEffect ä½¿æ¯å½“ count çš„çŠ¶æ€å€¼å˜åŒ–æ—¶ï¼Œéƒ½ä¼šé‡ç½® document.titleã€‚")]),t._v(" "),a("p",[t._v("æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰æŒ‡å®š useEffect çš„ç¬¬äºŒä¸ªå‚æ•° depsï¼Œè¡¨ç¤ºåªè¦ç»„ä»¶é‡æ–°æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ useEffect æŒ‡å®šçš„é€»è¾‘ï¼Œä¸é™åˆ¶å¿…é¡»æ˜¯ count å˜åŒ–æ—¶ã€‚useEffect è¯¦ç»†çš„å‚æ•°è¯´æ˜Žï¼Œè¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"https://reactjs.org/docs/hooks-effect.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Using the Effect Hook"),a("OutboundLink")],1)]),t._v(" "),t._m(22),t._v(" "),t._m(23),a("p",[t._v("ä»£ç ä¸­ï¼Œé€šè¿‡ useEffect æŽ§åˆ¶åœ¨çª—å£æ”¹å˜æ—¶é‡æ–°èŽ·å–å…¶å®½åº¦ã€‚")]),t._v(" "),a("p",[t._v("useEffect é€»è¾‘çš„è¿”å›žå€¼ï¼Œå¦‚æžœæ˜¯å‡½æ•°çš„è¯ï¼Œåˆ™å®šä¹‰å…¶ä¸ºæ¸…ç†é€»è¾‘ã€‚æ¸…ç†é€»è¾‘ä¼šåœ¨ç»„ä»¶éœ€è¦é‡æ–°æ‰§è¡Œ useEffect é€»è¾‘ä¹‹å‰ï¼Œæˆ–ç»„ä»¶è¢«é”€æ¯æ—¶æ‰§è¡Œã€‚")]),t._v(" "),a("p",[t._v("è¿™é‡Œåœ¨ useEffect é€»è¾‘ä¸­ï¼Œä¸º window å¯¹è±¡æ·»åŠ äº† resize äº‹ä»¶ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ç»„ä»¶é”€æ¯æ—¶æˆ–éœ€è¦é‡æ–°æ‰§è¡Œè¯¥å‰¯ä½œç”¨é€»è¾‘æ—¶ï¼Œå…ˆæŠŠ resize äº‹ä»¶æ³¨é”€æŽ‰ï¼Œä»¥é¿å…ä¸å¿…è¦çš„äº‹ä»¶å¤„ç†ã€‚")]),t._v(" "),a("p",[t._v("å¦å¤–ï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™é‡Œ useEffect çš„ç¬¬äºŒä¸ªå‚æ•°çš„å€¼æ˜¯ []ï¼Œè¡¨æ˜Žæ— ä¾èµ–é¡¹ï¼Œåªåœ¨ç»„ä»¶åˆ›å»ºåŽæ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å¤„ç†ä¹Ÿç¬¦åˆè¿™é‡Œçš„ä¸šåŠ¡åœºæ™¯ã€‚")]),t._v(" "),t._m(24),t._v(" "),t._m(25),a("p",[t._v("å¯ä»¥çœ‹åˆ° useEffect æ‰€æŒ‡å®šçš„å‰¯ä½œç”¨é€»è¾‘ï¼Œæ¶‰åŠåˆ°äº†ç»„ä»¶çš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸï¼šmountedã€updatedã€destroyedã€‚")]),t._v(" "),a("p",[t._v("é€šè¿‡å‚æ•°ï¼Œå¯ä»¥ä¸º useEffect æŒ‡å®š 3 ç§ä¿¡æ¯ï¼š")]),t._v(" "),t._m(26),t._v(" "),a("p",[t._v("å‰¯ä½œç”¨é€»è¾‘çš„æ‰§è¡Œç»†èŠ‚ç”± deps æŽ§åˆ¶ï¼š")]),t._v(" "),t._m(27),t._v(" "),a("p",[t._v("æ¸…ç†é€»è¾‘ï¼Œä¼šåœ¨ 2 ç§æƒ…å†µä¸‹æ‰§è¡Œï¼š")]),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),a("p",[t._v("ç›¸å½“äºŽä¸ºç»„ä»¶å­˜å‚¨ä¸€ä¸ªæœ¬åœ°å˜é‡ --- éžçŠ¶æ€ã€‚")]),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._m(34),t._v(" "),a("p",[t._v("æ·»åŠ éœ€è¦åœ¨ mounted äº‹ä»¶ä¸­æ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),a("p",[t._v("useMounted å®žçŽ°ç»†èŠ‚ï¼š")]),t._v(" "),t._m(35),a("p",[t._v("é€šè¿‡ useEffect å®žçŽ°ï¼Œå¦‚æžœ deps çš„å€¼ä¸ºç©ºçš„è¯ï¼Œfn å°±ä¸åœ¨ updated ä¸­æ‰§è¡Œäº† --- å³ä»…åœ¨ mounted æ—¶æ‰§è¡Œä¸€æ¬¡.")]),t._v(" "),t._m(36),t._v(" "),a("p",[t._v("æ·»åŠ éœ€è¦åœ¨ destroyed é˜¶æ®µæ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),t._m(37),a("p",[t._v("ä¸Šé¢æåˆ° useEffect çš„å‰¯ä½œç”¨é€»è¾‘çš„è¿”å›žå€¼ï¼Œå¦‚æžœæ˜¯å‡½æ•°çš„è¯ï¼Œä¼šåœ¨ destroyed é˜¶æ®µä½œä¸ºæ¸…ç†é€»è¾‘æ‰§è¡Œã€‚\nè¿™é‡Œé€šè¿‡è®¾ç½® deps çš„å€¼ä¸º[]ï¼Œå¹¶æŠŠ fn æŒ‡å®šä¸º useEffect çš„å‰¯ä½œç”¨é€»è¾‘çš„è¿”å›žå€¼ï¼Œä½¿ fn åœ¨ destroyed é˜¶æ®µæ‰§è¡Œã€‚")]),t._v(" "),t._m(38),t._v(" "),a("p",[t._v("æ·»åŠ åªåœ¨ç»„ä»¶æ›´æ–°åŽæ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),t._m(39),a("p",[t._v("é€šè¿‡ useEffect å®žçŽ°ï¼Œfn å®šä¹‰åœ¨äº†æ¸…ç†é€»è¾‘çš„ä½ç½®ï¼Œæ¯æ¬¡ç»„ä»¶æ›´æ–°éƒ½ä¼šæ‰§è¡Œï¼Œè¯¦ç»†è¯·å‚è€ƒ useEffect çš„å®žçŽ°ç»†èŠ‚ã€‚")]),t._v(" "),t._m(40),t._v(" "),a("p",[t._v("ä¸ºç»„ä»¶æ·»åŠ  watch.")]),t._v(" "),t._m(41),a("p",[t._v("ç›´æŽ¥é€šè¿‡ç»„ä»¶å®žä¾‹çš„ $watch å®žçŽ°ã€‚")]),t._v(" "),t._m(42),t._v(" "),a("p",[t._v("ä¸ºç»„ä»¶æ·»åŠ  computed å±žæ€§ã€‚")]),t._v(" "),t._m(43),a("p",[t._v("æœ¬è´¨ä¸Šä¹Ÿæ˜¯é€šè¿‡ç»„ä»¶å®žä¾‹çš„ $watch å®žçŽ°ã€‚")]),t._v(" "),t._m(44),t._v(" "),a("p",[t._v("è¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("POC of vue-hooks"),a("OutboundLink")],1)]),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"hooks-api-åœ¨-vue-ä¸­çš„å®žçŽ°åˆ†æž"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-api-åœ¨-vue-ä¸­çš„å®žçŽ°åˆ†æž","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks API åœ¨ Vue ä¸­çš„å®žçŽ°åˆ†æž")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("è·¨ç»„ä»¶ä»£ç å¤ç”¨é—®é¢˜ã€‚")]),this._v(" "),s("li",[this._v("å¤§ç»„ä»¶ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚")]),this._v(" "),s("li",[this._v("ç»„ä»¶æ ‘å±‚çº§å¾ˆæ·±ã€‚")]),this._v(" "),s("li",[this._v("ç±»ç»„ä»¶ä¸å®¹æ˜“ç†è§£ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooks-æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-æ˜¯ä»€ä¹ˆ","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks æ˜¯ä»€ä¹ˆ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("The term hooking covers a range of techniques used to alter or augment the behavior of an operating system, of applications, or of other software components by intercepting function calls or messages or events passed between software components. Code that handles such intercepted function calls, events or messages is called a hook.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("useState -- ä¸ºç»„ä»¶æ·»åŠ æœ¬åœ°å“åº”å¼çŠ¶æ€ã€‚")]),this._v(" "),s("li",[this._v("useEffect -- ä¸ºç»„ä»¶æ·»åŠ çŠ¶æ€æ›´æ–°åŽï¼Œéœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨é€»è¾‘ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooks-api-çš„-vue-å®žçŽ°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-api-çš„-vue-å®žçŽ°","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks API çš„ Vue å®žçŽ°")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"withhooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#withhooks","aria-hidden":"true"}},[this._v("#")]),this._v(" withHooks")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  withHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  useData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  useComputed\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-hooks"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" double "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useComputed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`count is ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`double count is ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("double"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'count++'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" currentInstance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" isMounting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" callIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`invalid hooks call: hooks can only be called in a function passed to withHooks.`")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        _state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_refsStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_computedStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      callIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n      currentInstance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n      isMounting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_vnode\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$attrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      currentInstance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ret\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("callIndexï¼Œä¸º Hooks ç›¸å…³çš„å­˜å‚¨å¯¹è±¡æä¾› keyã€‚è¿™é‡Œæ¯æ¬¡æ¸²æŸ“ï¼Œéƒ½é‡ç½®ä¸º 0ï¼Œæ˜¯ä¸ºäº†èƒ½å¤Ÿæ ¹æ®è°ƒç”¨æ¬¡åºåŒ¹é…å¯¹åº”çš„ Hooksï¼Œè¿™æ ·å¤„ç†ä¹Ÿé™åˆ¶äº† Hooks åªèƒ½åœ¨é¡¶çº§ä»£ç ä¸­è°ƒç”¨ã€‚")]),this._v(" "),s("li",[this._v("currentInstanceï¼Œç»“åˆ ensureCurrentInstance å‡½æ•°ï¼Œç”¨äºŽç¡®ä¿ Hooks åªèƒ½åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ã€‚")]),this._v(" "),s("li",[this._v("isMountingï¼Œç”¨äºŽæ ‡è¯†ç»„ä»¶çš„æŒ‚è½½çŠ¶æ€")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usestate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usestate","aria-hidden":"true"}},[this._v("#")]),this._v(" useState")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("const [state, setState] = useState(initialState);")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("setState(newState);")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" withHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-hooks"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"span"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`count is: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"button"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŽ·å–ç»„ä»¶å®žä¾‹çš„æœ¬åœ°çŠ¶æ€ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_state\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ¬åœ°çŠ¶æ€æ›´æ–°å™¨ï¼Œä»¥è‡ªå¢židä¸ºé”®å€¼ï¼Œå­˜å‚¨åˆ°æœ¬åœ°çŠ¶æ€ä¸­ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("updater")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡$setä¿è¯å…¶æ˜¯å“åº”å¼çŠ¶æ€ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›žå“åº”å¼çŠ¶æ€ä¸Žæ›´æ–°å™¨ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("å‡½æ•° ensureCurrentInstance æ˜¯ä¸ºäº†ç¡®ä¿ useState å¿…é¡»åœ¨ render ä¸­æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯é™åˆ¶äº†å¿…é¡»åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­æ‰§è¡Œã€‚")]),this._v(" "),s("li",[this._v("ä»¥ callIndex ç”Ÿæˆçš„è‡ªå¢ž id ä½œä¸ºå­˜å‚¨çŠ¶æ€å€¼çš„ keyã€‚è¯´æ˜Ž useState éœ€è¦ä¾èµ–ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶çš„è°ƒç”¨é¡ºåºæ¥åŒ¹é…è¿‡åŽ»çš„ stateï¼ˆæ¯æ¬¡æ¸²æŸ“ callIndex éœ€è¦é‡ç½®ä¸º0ï¼‰ã€‚è¿™ä¹Ÿé™åˆ¶äº† useState å¿…é¡»åœ¨é¡¶å±‚ä»£ç ä¸­ä½¿ç”¨ã€‚")]),this._v(" "),s("li",[this._v("å…¶å®ƒ hooks ä¹Ÿå¿…é¡»éµå¾ªä»¥ä¸Šä¸¤ç‚¹ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useeffect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useeffect","aria-hidden":"true"}},[this._v("#")]),this._v(" useEffect")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"æ–¹æ³•ç­¾åï¼š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•ç­¾åï¼š","aria-hidden":"true"}},[this._v("#")]),this._v(" æ–¹æ³•ç­¾åï¼š")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("void useEffect(rawEffect, deps)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"è°ƒç”¨ç¤ºä¾‹-1ï¼š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨ç¤ºä¾‹-1ï¼š","aria-hidden":"true"}},[this._v("#")]),this._v(" è°ƒç”¨ç¤ºä¾‹ 1ï¼š")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" withHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-hooks"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count is "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" count\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"span"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`count is: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"button"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"è°ƒç”¨ç¤ºä¾‹-2ï¼š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨ç¤ºä¾‹-2ï¼š","aria-hidden":"true"}},[this._v("#")]),this._v(" è°ƒç”¨ç¤ºä¾‹ 2ï¼š")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" withHooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-hooks"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleResize")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resize"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleResize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resize"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleResize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`window width is: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"useeffect-å®žçŽ°ç»†èŠ‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-å®žçŽ°ç»†èŠ‚","aria-hidden":"true"}},[this._v("#")]),this._v(" useEffect å®žçŽ°ç»†èŠ‚:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" current "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cleanup\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("current")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("effect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" current "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" effect\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("current")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rawEffectçš„è¿”å›žå€¼ï¼Œå¦‚æžœæ˜¯ä¸€ä¸ªå‡½æ•°çš„è¯ï¼Œåˆ™å®šä¹‰ä¸ºuseEffectå‰¯ä½œç”¨çš„æ¸…ç†å‡½æ•°ã€‚")]),t._v("\n        effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawEffect\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ç»„ä»¶å®žä¾‹ä¸Šï¼Œå­˜å‚¨useEffectç›¸å…³é€»è¾‘ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      deps\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶å®žä¾‹mountedæ—¶ï¼Œæ‰§è¡ŒuseEffecté€»è¾‘ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:mounted'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶å®žä¾‹destroyedæ—¶ï¼Œæ‰§è¡ŒuseEffectç›¸å…³æ¸…ç†é€»è¾‘ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:destroyed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥æœªæŒ‡å®šä¾èµ–é¡¹æˆ–å­˜åœ¨æ˜Žç¡®çš„ä¾èµ–é¡¹æ—¶ï¼Œå½“ç»„ä»¶å®žä¾‹updatedæ—¶ï¼Œæ‰§è¡ŒuseEffecté€»è¾‘ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥æŒ‡å®šä¾èµ–é¡¹ä¸º [], åˆ™useEffectåªåœ¨mountedæ—¶æ‰§è¡Œä¸€æ¬¡ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:updated'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" record "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevDeps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" record\n    record"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deps\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("some")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" prevDeps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¾èµ–çš„çŠ¶æ€å€¼æœ‰å˜åŠ¨æ—¶ï¼Œæ¸…ç†useEffectçš„å‰¯ä½œç”¨å¹¶é‡æ–°æ‰§è¡Œã€‚")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useEffect æ‰§è¡Œå®Œæ¯•åŽï¼Œä¼šå°† current çš„å±žæ€§ç½®ä¸º null. è¿™é‡Œå°† current çš„å€¼è®¾ç½®ä¸º rawEffectï¼Œ")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ˜¯ä¸ºäº†åœ¨ updated æ—¶æ‰§è¡Œ useEffect é€»è¾‘ã€‚")]),t._v("\n      effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawEffect\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("rawEffect - å‰¯ä½œç”¨é€»è¾‘å†…å®¹ã€‚")]),this._v(" "),s("li",[this._v("æ¸…ç†é€»è¾‘ - é€šè¿‡ rawEffect çš„è¿”å›žå€¼å®šä¹‰ã€‚")]),this._v(" "),s("li",[this._v("ä¾èµ– - å®šä¹‰ä½•æ—¶éœ€è¦é‡å¤æ‰§è¡Œå‰¯ä½œç”¨é€»è¾‘ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("mounted æ—¶ï¼Œå›ºå®šåœ°æ‰§è¡Œä¸€æ¬¡ã€‚")]),this._v(" "),s("li",[this._v("å¦‚æžœ deps æœªæŒ‡å®šï¼Œåˆ™æ¯æ¬¡ updated åŽéƒ½æ‰§è¡Œä¸€æ¬¡ã€‚")]),this._v(" "),s("li",[this._v("å¦‚æžœ deps ä¸ºç©ºæ•°ç»„ï¼Œåˆ™ updated åŽä¸æ‰§è¡Œã€‚")]),this._v(" "),s("li",[this._v("å¦‚æžœ deps æŒ‡å®šäº†ä¾èµ–é¡¹ï¼Œåˆ™å½“ç›¸åº”çš„ä¾èµ–é¡¹çš„å€¼æ”¹å˜æ—¶ï¼Œæ‰§è¡Œä¸€æ¬¡ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("rawEffect éœ€è¦é‡å¤æ‰§è¡Œä¹‹å‰ï¼Œæ¸…ç†ä¸Šæ¬¡è¿è¡Œæ‰€å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚")]),this._v(" "),s("li",[this._v("ç»„ä»¶é”€æ¯æ—¶ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useref","aria-hidden":"true"}},[this._v("#")]),this._v(" useRef")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"æ–¹æ³•ç­¾åï¼š-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•ç­¾åï¼š-2","aria-hidden":"true"}},[this._v("#")]),this._v(" æ–¹æ³•ç­¾åï¼š")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("const refContainer = useRef(initialValue)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"useref-å®žçŽ°ç»†èŠ‚ï¼š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useref-å®žçŽ°ç»†èŠ‚ï¼š","aria-hidden":"true"}},[this._v("#")]),this._v(" useRef å®žçŽ°ç»†èŠ‚ï¼š")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" _refsStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" refs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" isMounting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("refs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" initial\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    refs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usemounted"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usemounted","aria-hidden":"true"}},[this._v("#")]),this._v(" useMounted")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usedestroyed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usedestroyed","aria-hidden":"true"}},[this._v("#")]),this._v(" useDestroyed")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDestroyed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useupdated"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useupdated","aria-hidden":"true"}},[this._v("#")]),this._v(" useUpdated")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useUpdated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isMount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ useRef ç”Ÿæˆä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      isMount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·³è¿‡ mounted.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usewatch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usewatch","aria-hidden":"true"}},[this._v("#")]),this._v(" useWatch")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$watch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usecomputed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecomputed","aria-hidden":"true"}},[this._v("#")]),this._v(" useComputed")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useComputed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_computedStore\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$watch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      val "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" val "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"å®Œæ•´ä»£ç åŠç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®Œæ•´ä»£ç åŠç¤ºä¾‹","aria-hidden":"true"}},[this._v("#")]),this._v(" å®Œæ•´ä»£ç åŠç¤ºä¾‹")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"ç»“è®º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è®º","aria-hidden":"true"}},[this._v("#")]),this._v(" ç»“è®º")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Hooks æœ‰èƒ½åŠ›åˆ‡å…¥ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªçŽ¯èŠ‚ã€‚")]),this._v(" "),s("li",[this._v("ä»¥ çº¯ç»„ä»¶ + Hooks çš„æ–¹å¼å¼€å‘ç»„ä»¶ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šå‘Šåˆ« this äº†ã€‚æˆ‘ä»¬ç”±é¢å‘å¯¹è±¡ç¼–ç¨‹è½¬åˆ°äº†å‡½æ•°å¼ç¼–ç¨‹ã€‚")]),this._v(" "),s("li",[this._v("é€šè¿‡ Hooksï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡é€»è¾‘çš„ç›¸å…³æ€§ç»„ç»‡ä»£ç æ¨¡å—ï¼Œæ‘†è„±äº†ç»„ä»¶ç±»åž‹æ ¼å¼çš„é™åˆ¶ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"ç–‘é—®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç–‘é—®","aria-hidden":"true"}},[this._v("#")]),this._v(" ç–‘é—®")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Hooks èƒ½å¦æ›¿ä»£å…¨å±€çŠ¶æ€ç®¡ç†åº“ï¼Œå¦‚reduxã€vuexç­‰ã€‚ç›®å‰æ¥çœ‹ä¸å¯ä»¥ï¼ŒuseStateå¤„ç†çš„æœ¬åœ°çŠ¶æ€ï¼Œå…¨å±€çŠ¶æ€å¦‚ä½•å¤„ç†ï¼Ÿ")])])}],!1,null,null,null);e.options.__file="hooks-and-vue.md";s.default=e.exports}}]);