(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{170:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("åˆæ¬¡å¬åˆ° React Hooksï¼Œæ˜¯åœ¨å…¶åˆšå‘å¸ƒçš„é‚£å‡ å¤©ï¼Œç½‘ä¸Šé“ºå¤©ç›–åœ°çš„æ–‡ç« ä»‹ç»å®ƒã€‚çœ‹å­—é¢æ„æ€æ˜¯ â€˜React é’©å­â€™ï¼Œå°±æƒ³å½“ç„¶åœ°ç†è§£åº”è¯¥æ˜¯ä¿®æ”¹ React ç»„ä»¶çš„é’©å­å§ã€‚React å»¶ä¼¸çš„æ¦‚å¿µéå¸¸å¤šï¼Œé«˜é˜¶ç»„ä»¶ã€å‡½æ•°å¼ã€Render Propsã€Contextã€ç­‰ç­‰ã€‚åˆæ¥äº†ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œå‰ç«¯å¼€å‘å·²ç»å¤Ÿå¤æ‚äº†ï¼Œæˆ‘å¿ƒé‡Œè¿™æ ·æƒ³ç€ã€‚è¿‘ä¸¤å¹´ä¸€ç›´ç”¨ Vueï¼Œè§‰å¾— React çš„è¯¸å¤šç‰¹æ€§ï¼Œåœ¨ Vue ä¸­ä¹Ÿéƒ½æœ‰ç±»ä¼¼çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç«‹å³å»äº†è§£å®ƒã€‚")]),t._v(" "),a("p",[t._v("åæ¥çœ‹åˆ°å°¤å¤§åœ¨"),a("a",{attrs:{href:"https://www.bilibili.com/video/av36787459/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue 3.0 æœ€è¿‘è¿›å±•"),a("OutboundLink")],1),t._v("çš„è§†é¢‘ä¸­ä¹Ÿæåˆ°äº† Hooks APIï¼Œå¹¶å†™äº†ä¸€ä¸ªåœ¨ "),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue ä¸­ä½¿ç”¨ Hooks çš„ POC"),a("OutboundLink")],1),t._v("ã€‚çœ‹æ¥ Hooks è¿˜æ˜¯æŒºé‡è¦çš„ï¼Œäºæ˜¯é©¬ä¸Šæ‰¾åˆ° React å®˜æ–¹æ–‡æ¡£ä¸å‘å¸ƒä¼šçš„è§†é¢‘ --- åˆä¸€è½®çš„æ¶è¡¥ã€‚")]),t._v(" "),a("p",[t._v("çœ‹äº†ç›¸å…³èµ„æ–™ï¼Œè§‰å¾— Hooks çš„åº”ç”¨å‰æ™¯è¿˜æ˜¯æŒºè¯±äººçš„ï¼Œè§£å†³äº†ç›®å‰å‰ç«¯å¼€å‘ä¸­çš„è¯¸å¤šç—›ç‚¹ã€‚ä¸è¿‡ React Hooks ç›®å‰è¿˜åœ¨ alpha é˜¶æ®µï¼Œä¸å¤ªå®Œå–„ï¼Œå†…ç½® Hooks ä¹Ÿä¸ä¸°å¯Œã€‚è€Œ Vue åªæœ‰ä¸ª Hooks POCï¼ŒVue3.0 å¾ˆå¯èƒ½ä¼šåŠ ä¸Šï¼Œä½†éœ€è¦å†ç­‰å‡ ä¸ªæœˆã€‚æ‰€ä»¥æš‚ä¸å»ºè®®åœ¨æ­£å¼ä»£ç ä¸­ä½¿ç”¨ã€‚")]),t._v(" "),a("p",[t._v("æœ¬ç¯‡æ–‡ç« ç€é‡è§£é‡Šä¸€ä¸‹æˆ‘å¯¹ Hooks çš„ç†è§£ï¼Œä»¥åŠ Hooks API åœ¨ Vue ä¸­çš„æºç å®ç°ã€‚ä¹Ÿè¯´æ˜ä¸€ä¸‹ Hooks æ˜¯ä¸ªä¸­ç«‹çš„æ¦‚å¿µï¼Œå¯ä»¥åœ¨ä»»ä½•æ¡†æ¶ä¸­ä½¿ç”¨ï¼Œé React æ‰€ç‹¬æœ‰ ğŸ˜ƒ")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¤è¿°ä¸€ä¸‹ Hooks ä¼šå¸®æˆ‘ä»¬è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("æŒ‰ç…§ Dan çš„è¯´æ³•ï¼ŒReact é¡¹ç›®çš„å¼€å‘ä¸­æœ‰ä»¥ä¸‹å‡ ä¸ªç—›ç‚¹ï¼š")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("å½“ç„¶ Vue é¡¹ç›®ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå…¶å®è¿™äº›é—®é¢˜ä¹Ÿæ˜¯ç›¸å…³è”çš„ã€‚")]),t._v(" "),a("p",[t._v("ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼Œæˆ‘ä»¬å°†é¡µé¢æ‹†åˆ†æˆä¸åŒçš„ç»„ä»¶ï¼ŒæŒ‰è‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµï¼Œå±‚å±‚åµŒå¥—ã€‚ä»£ç ç»“æ„çš„æœ€å°é¢—ç²’æ˜¯ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæŸäº›ç»„ä»¶å¤ªå¤§ï¼Œæˆ‘ä»¬å°±ç»§ç»­æ‹†åˆ†æˆæ›´å°çš„ç»„ä»¶ï¼Œç„¶ååœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨å®ƒã€‚\nå¦‚æœå¤šç»„ä»¶ä¹‹é—´æœ‰ä¸å°‘é€šç”¨é€»è¾‘ï¼Œæˆ‘ä»¬å°±ç”¨ mixin æˆ– æ„å»ºç»„ä»¶çš„ç»§æ‰¿ä½“ç³»ã€‚")]),t._v(" "),a("p",[t._v("ä½†æ˜¯ç»„ä»¶æ‹†åˆ†ï¼Œä¼šä½¿æˆ‘ä»¬å¾ˆå®¹æ˜“ä¸å°å¿ƒå°±æŠŠç»„ä»¶çš„å±‚çº§æå¾—å¾ˆæ·±ï¼Œå¢åŠ ç³»ç»Ÿå¤æ‚åº¦ä¸è¯´ï¼Œæ€§èƒ½ä¹Ÿå¯èƒ½å—åˆ°å½±å“ã€‚å¹¶ä¸”ï¼Œæœ‰äº›ç»„ä»¶çš„äº¤äº’é€»è¾‘ç¡®å®æ¯”è¾ƒå¤æ‚ï¼Œæ‹†åˆ†ä¸å¾—ï¼Œç³»ç»Ÿé•¿æœŸè¿­ä»£ä¸‹æ¥ï¼Œç´¯ç§¯çš„ä»£ç é‡å¾ˆå¤§ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚")]),t._v(" "),a("p",[t._v("è·¨ç»„ä»¶é€»è¾‘å¤ç”¨æ›´åŠ æ£˜æ‰‹ï¼mixinæ˜¯ä¸€ä¸ªåŒåˆƒå‰‘(å‚è€ƒï¼š"),a("a",{attrs:{href:"https://reactjs.org/blog/2016/07/13/mixins-considered-harmful.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mixin æ˜¯æœ‰å®³çš„"),a("OutboundLink")],1),t._v(")ï¼›ç»„ä»¶ç»§æ‰¿ä¹Ÿä¸å¯å–ï¼Œè™½ç„¶åœ¨å¼ºç±»å‹çš„é¢å‘å¯¹è±¡è¯­è¨€(å¦‚ï¼šJava/C#)ä¸­ï¼Œç»§æ‰¿ç”¨ç€å¾ˆå¥½ï¼Œä½†åœ¨ JavaScript ä¸­æ€»æ„Ÿåˆ°åŠ›ä¸ä»å¿ƒï¼Œä¹Ÿä½¿å¾—ä»£ç æ™¦æ¶©éš¾æ‡‚ï¼›æŠ½å– util åŒ…ä¹Ÿæ˜¯ä¸€ä¸ªæƒ¯ç”¨çš„åšæ³•ï¼Œä½†å¦‚æœè¦æŠ½å–çš„å…¬ç”¨é€»è¾‘éœ€è¦å…³è”ç»„ä»¶çš„æœ¬åœ°çŠ¶æ€å‘¢ï¼Œå¦‚æœç›¸å…³è”çš„å…¬ç”¨é€»è¾‘éœ€è¦åˆ†æ•£åœ¨ç»„ä»¶çš„ä¸åŒç”Ÿå‘½å‘¨æœŸä¸­å‘¢ï¼Œå°±æä¸å®šäº†ï¼è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€å°±å¦¥åäº† --- å¤§ç»„ä»¶/é‡å¤é€»è¾‘äº§ç”Ÿäº†ã€‚")]),t._v(" "),a("p",[t._v("ä¸Šæ–‡æåˆ°ç±»ç»„ä»¶çš„é—®é¢˜ï¼Œè™½ç„¶ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼å»ºæ¨¡ç³»ç»Ÿæ˜¯å¾ˆå¥½çš„åšæ³•ï¼Œä½†æˆ‘ä¸ªäººè§‰å¾—åœ¨ JavaScript ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨åŸºäº React/Vue ç»„ä»¶çš„å¼€å‘ä¸­ï¼Œå¹¶ä¸å¾ˆåˆé€‚ï¼Œå¾ˆå®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬ç»å¸¸éœ€è¦æŠŠå‡½æ•° bind åˆ°æŸä¸ªä¸Šä¸‹æ–‡ï¼Œä»¥ç¡®ä¿ this çš„æ­£ç¡®æŒ‡å‘ã€‚JavaScript çš„è¯­æ³•è¿‡äºçµæ´»ï¼Œæˆ‘ä»¬çŸ¥é“ JavaScript çš„åŸºäºé™æ€ä½œç”¨åŸŸçš„ï¼Œå°±æ˜¯è¯´ä»æºç ä¸Šçœ‹ï¼Œå°±èƒ½å¤Ÿæ¨æ–­å˜é‡çš„ä½œç”¨åŸŸã€‚ä½† this æ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒæ˜¯åŸºäºåŠ¨æ€ä½œç”¨åŸŸçš„ï¼Œå°±æ˜¯è¯´ this çš„å€¼æ˜¯ç”±è°ƒç”¨è€…å†³å®šçš„ã€‚åŒä¸€ä¸ªæ–¹æ³•ï¼Œç”¨ä¸åŒçš„æ–¹å¼è°ƒç”¨ï¼Œå…¶ this æŒ‡å‘å®Œå…¨ä¸ä¸€æ ·ã€‚æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œè¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"http://dmitrysoshnikov.com/ecmascript/chapter-3-this/",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯¦è§£this"),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å¦‚ä½•è§£å†³è¿™äº›ç—›ç‚¹å‘¢ --- Hooks!")]),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("wikipedia ä¸Šå…³äº "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Hooking",target:"_blank",rel:"noopener noreferrer"}},[t._v("hooks"),a("OutboundLink")],1),t._v(" çš„å®šä¹‰æ˜¯ï¼š")]),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("ç¿»è¯‘æˆä¸­æ–‡å¤§ä½“å«ä¹‰æ˜¯ï¼š")]),t._v(" "),a("p",[t._v("Hooks åŒ…å«äº†ä¸€ç³»åˆ—æŠ€æœ¯ï¼Œç”¨äºæ”¹å˜æˆ–å¢å¼ºæ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€è½¯ä»¶ç»„ä»¶çš„è¡Œä¸ºã€‚è¿™äº›æŠ€æœ¯åŒ…æ‹¬æ‹¦æˆªè½¯ä»¶è¿è¡Œè¿‡ç¨‹ä¸­çš„å‡½æ•°è°ƒç”¨ã€æ¶ˆæ¯ã€äº‹ä»¶ã€‚")]),t._v(" "),a("p",[t._v("å¯¹åº”åˆ° React/Vue ä¸­ï¼ŒHooks æ˜¯ï¼šå¯ä»¥æ”¹å˜æˆ–å¢å¼º React/Vue ç»„ä»¶åŠŸèƒ½çš„ä»£ç æ¨¡å—ã€‚")]),t._v(" "),a("p",[t._v("React ä¸­å¼ºè°ƒ Hooks åªèƒ½åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ã€‚æœ¬è´¨ä¸Šå‡½æ•°å¼ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå•çº¯çš„æ¸²æŸ“å‡½æ•°ï¼Œæ¸²æŸ“æ•°æ®æ¥æºäºå¤–éƒ¨ï¼Œç»„ä»¶æœ¬èº«æ— çŠ¶æ€ --- è¿™ä¸ªç»„ä»¶çš„çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸä¸­éœ€è¦æ‰§è¡Œçš„é€»è¾‘ä»é‚£é‡Œæ¥å‘¢? --- ç”± hooks æä¾›ã€‚")]),t._v(" "),a("p",[t._v("å› æ­¤å¯è§ï¼ŒHooks ä½¿æˆ‘ä»¬æ¨¡å—åŒ–å¼€å‘çš„ç²’åº¦æ›´ç»†äº†ï¼Œæ›´å‡½æ•°å¼äº†ã€‚ç»„ä»¶çš„åŠŸèƒ½å˜æˆäº†ç”± Hooks ä¸€ç‚¹ç‚¹åœ°è£…é…èµ·æ¥ã€‚")]),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("Hooks åº”è¯¥æœ‰èƒ½åŠ›ä¾µå…¥ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸ªç¯èŠ‚ã€‚React å›¢é˜Ÿä¹Ÿå¸Œæœ›æœªæ¥ 'å‡½æ•°å¼ç»„ä»¶ + Hooks' æˆä¸ºå¼€å‘ç»„ä»¶çš„ä¸»è¦æ–¹å¼ã€‚ç›®å‰ React æä¾›çš„ Hooks è¿˜ä¸å¤Ÿä¸°å¯Œï¼Œåç»­ä¼šé€æ¸å®Œå–„ã€‚")]),t._v(" "),a("p",[t._v("è¿™é‡Œç»“åˆ React Hooks API ä¸ "),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("å°¤å¤§çš„Hooks POC of Vue"),a("OutboundLink")],1),t._v(" åˆ†æä¸€ä¸‹ Hooks API åœ¨ Vue ä¸­çš„å®ç°ã€‚")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),a("p",[t._v("å¯ä»¥ä¸ºç»„ä»¶æ·»åŠ ä¸€ä¸ªå“åº”å¼çš„æœ¬åœ°çŠ¶æ€ï¼ŒåŠè¯¥çŠ¶æ€ç›¸å…³çš„æ›´æ–°å™¨ã€‚")]),t._v(" "),a("p",[t._v("æ–¹æ³•ç­¾åä¸ºï¼š")]),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("setState ç”¨äºæ›´æ–°çŠ¶æ€ï¼š")]),t._v(" "),t._m(9),t._v(" "),a("p",[t._v("Vue ä¸­å®ç° useState:")]),t._v(" "),t._m(10),a("p",[t._v("ä»¥ä¸Šä»£ç å¾ˆæ¸…æ™°åœ°æè¿°äº† useState æ˜¯åœ¨ç»„ä»¶ä¸­åˆ›å»ºäº†ä¸€ä¸ªæœ¬åœ°çš„å“åº”å¼çŠ¶æ€ï¼Œå¹¶ç”Ÿæˆäº†ä¸€ä¸ªçŠ¶æ€æ›´æ–°å™¨ã€‚")]),t._v(" "),a("p",[t._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼š")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),a("p",[t._v("useEffect æ˜¯ä¸ºäº†åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œæ‰§è¡Œä¸€äº›å¸¦æœ‰å‰¯ä½œç”¨çš„é€»è¾‘ã€‚")]),t._v(" "),a("p",[t._v("æ–¹æ³•ç­¾åï¼š")]),t._v(" "),t._m(13),t._v(" "),a("p",[t._v("Vue ä¸­å®ç° useEffect:")]),t._v(" "),t._m(14),a("p",[t._v("å¯ä»¥çœ‹åˆ° useEffect æ‰€æŒ‡å®šçš„å‰¯ä½œç”¨é€»è¾‘ï¼Œä¼šåœ¨ç»„ä»¶çš„ mountedã€updatedã€destroyed ä¸‰ä¸ªæ—¶æœŸæ‰§è¡Œã€‚æ‰§è¡Œçš„ç»†èŠ‚ç”± deps æ§åˆ¶ã€‚")]),t._v(" "),a("p",[t._v("éœ€è¦æ³¨æ„ï¼š")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),a("p",[t._v("ç›¸å½“äºä¸ºç»„ä»¶å­˜å‚¨ä¸€ä¸ªæœ¬åœ°å˜é‡ --- éçŠ¶æ€ã€‚")]),t._v(" "),a("p",[t._v("æ–¹æ³•ç­¾åï¼š")]),t._v(" "),t._m(17),t._v(" "),a("p",[t._v("Vue ä¸­ useRef çš„å®ç°ï¼š")]),t._v(" "),t._m(18),t._m(19),t._v(" "),a("p",[t._v("æ·»åŠ éœ€è¦åœ¨ mounted äº‹ä»¶ä¸­æ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),a("p",[t._v("Vue ä¸­ useMounted çš„å®ç°ï¼š")]),t._v(" "),t._m(20),a("p",[t._v("é€šè¿‡ useEffect å®ç°ï¼Œå¦‚æœ deps çš„å€¼ä¸ºç©ºçš„è¯ï¼Œfn å°±ä¸åœ¨ updated ä¸­æ‰§è¡Œäº† --- å³ä»…åœ¨ mounted æ—¶æ‰§è¡Œä¸€æ¬¡.")]),t._v(" "),t._m(21),t._v(" "),a("p",[t._v("æ·»åŠ éœ€è¦åœ¨ destroyed é˜¶æ®µæ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),t._m(22),a("p",[t._v("ä¸Šé¢æåˆ° useEffect çš„å‰¯ä½œç”¨é€»è¾‘çš„è¿”å›å€¼ï¼Œå¦‚æœæ˜¯å‡½æ•°çš„è¯ï¼Œä¼šåœ¨ destroyed é˜¶æ®µä½œä¸ºæ¸…ç†é€»è¾‘æ‰§è¡Œã€‚\nè¿™é‡Œé€šè¿‡è®¾ç½® deps çš„å€¼ä¸º[]ï¼Œå¹¶æŠŠ fn æŒ‡å®šä¸º useEffect çš„å‰¯ä½œç”¨é€»è¾‘çš„è¿”å›å€¼ï¼Œä½¿ fn åœ¨ destroyed é˜¶æ®µæ‰§è¡Œã€‚")]),t._v(" "),t._m(23),t._v(" "),a("p",[t._v("æ·»åŠ åªåœ¨ç»„ä»¶æ›´æ–°åæ‰§è¡Œçš„é€»è¾‘ã€‚")]),t._v(" "),t._m(24),a("p",[t._v("é€šè¿‡ useEffect å®ç°ï¼Œfn å®šä¹‰åœ¨äº†æ¸…ç†é€»è¾‘çš„ä½ç½®ï¼Œæ¯æ¬¡ç»„ä»¶æ›´æ–°éƒ½ä¼šæ‰§è¡Œï¼Œè¯¦ç»†è¯·å‚è€ƒ useEffect çš„å®ç°ç»†èŠ‚ã€‚")]),t._v(" "),t._m(25),t._v(" "),a("p",[t._v("ä¸ºç»„ä»¶æ·»åŠ  watch.")]),t._v(" "),t._m(26),a("p",[t._v("ç›´æ¥é€šè¿‡ç»„ä»¶å®ä¾‹çš„ $watch å®ç°ã€‚")]),t._v(" "),t._m(27),t._v(" "),a("p",[t._v("ä¸ºç»„ä»¶æ·»åŠ  computed å±æ€§ã€‚")]),t._v(" "),t._m(28),a("p",[t._v("æœ¬è´¨ä¸Šä¹Ÿæ˜¯é€šè¿‡ç»„ä»¶å®ä¾‹çš„ $watch å®ç°ã€‚")]),t._v(" "),t._m(29),t._v(" "),a("p",[t._v("æŠŠæŒ‡å®šçš„æ¸²æŸ“å‡½æ•°å°è£…æˆ Vue ç»„ä»¶ã€‚")]),t._v(" "),t._m(30),a("p",[t._v("Vue ä¸­å‡½æ•°å¼ç»„ä»¶ä¸å¤šè§ï¼Œè¿™é‡Œæ˜¯ä¸ºäº†æ¨¡æ‹Ÿ React çš„å‡½æ•°å¼ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("æœ¬è´¨ä¸Šå‡½æ•°å¼ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œåªè´Ÿè´£æ¸²æŸ“ï¼Œæ¸²æŸ“æ•°æ®æ¥æºäºå¤–éƒ¨ï¼Œæœ¬èº«æ— çŠ¶æ€ --- ç›¸å½“äºèµ¤è£¸è£¸çš„ç»„ä»¶ã€‚å®ƒçš„çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸä¸­éœ€è¦æ‰§è¡Œçš„é€»è¾‘ä»é‚£é‡Œæ¥å‘¢? --- ç”± hooks æä¾›ã€‚")]),t._v(" "),a("p",[t._v("å› æ­¤æ›´ç›´è§‚åœ°è¯´æ˜äº†ï¼Œhooksä½¿æˆ‘ä»¬æ¨¡å—åŒ–çš„å¼€å‘ç²’åº¦æ›´ç»†äº†ï¼Œæ›´å‡½æ•°å¼äº†ã€‚ç»„ä»¶çš„åŠŸèƒ½å˜æˆäº†ç”± hooks ä¸€ç‚¹ç‚¹åœ°è£…é…èµ·æ¥ã€‚")]),t._v(" "),a("p",[t._v("å®Œæ•´ä»£ç åŠç¤ºä¾‹è¯·å‚è€ƒï¼š"),a("a",{attrs:{href:"https://github.com/yyx990803/vue-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("POC of vue-hooks"),a("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"hooks-api-åœ¨-vue-ä¸­çš„å®ç°åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-api-åœ¨-vue-ä¸­çš„å®ç°åˆ†æ","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks API åœ¨ Vue ä¸­çš„å®ç°åˆ†æ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("è·¨ç»„ä»¶ä»£ç å¤ç”¨é—®é¢˜ã€‚")]),this._v(" "),s("li",[this._v("å¤§ç»„ä»¶ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚")]),this._v(" "),s("li",[this._v("ç»„ä»¶æ ‘å±‚çº§å¾ˆæ·±ã€‚")]),this._v(" "),s("li",[this._v("ç±»ç»„ä»¶ä¸å®¹æ˜“ç†è§£ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooks-æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-æ˜¯ä»€ä¹ˆ","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks æ˜¯ä»€ä¹ˆ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("The term hooking covers a range of techniques used to alter or augment the behavior of an operating system, of applications, or of other software components by intercepting function calls or messages or events passed between software components. Code that handles such intercepted function calls, events or messages is called a hook.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hooks-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-api","aria-hidden":"true"}},[this._v("#")]),this._v(" Hooks API")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("React Hooks åªåœ¨ alpha é˜¶æ®µï¼Œè€Œ Vue åªæ˜¯æœ‰ä¸ª Hooks POCï¼Œç›®å‰è¿™ç§æœºåˆ¶è¿˜å¾ˆä¸å®Œå–„ï¼Œä¸å»ºè®®åœ¨æ­£å¼ä»£ç ä¸­ä½¿ç”¨ã€‚ä½† Hooks å¸¦æ¥çš„åº”ç”¨å‰æ™¯éå¸¸è¯±äººï¼Œè¿™é‡Œåˆ†æ Hooks çš„ Vue å®ç°æ˜¯ä¸ºäº†æ›´å¥½åœ°ç†è§£ Hooksï¼Œä»¥åŠè¯´æ˜ Hooks æ˜¯ä¸ªä¸­ç«‹çš„æ¦‚å¿µï¼Œé React æ‰€ç‹¬æœ‰(Vue3.0 å¾ˆå¯èƒ½ä¼šåŠ ä¸Šï¼Œä½†éœ€è¦å†ç­‰å‡ ä¸ªæœˆ)ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usestate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usestate","aria-hidden":"true"}},[this._v("#")]),this._v(" useState")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("const [state, setState] = useState(initialState);")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("setState(newState);")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–ç»„ä»¶å®ä¾‹çš„æœ¬åœ°çŠ¶æ€ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_state\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ¬åœ°çŠ¶æ€æ›´æ–°å™¨ï¼Œä»¥è‡ªå¢idä¸ºé”®å€¼ï¼Œå­˜å‚¨åˆ°æœ¬åœ°çŠ¶æ€ä¸­ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("updater")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡$setä¿è¯å…¶æ˜¯å“åº”å¼çŠ¶æ€ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›å“åº”å¼çŠ¶æ€ä¸æ›´æ–°å™¨ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("å‡½æ•° ensureCurrentInstance æ˜¯ä¸ºäº†ç¡®ä¿ useState å¿…é¡»åœ¨ render ä¸­æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯é™åˆ¶äº†å¿…é¡»åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­æ‰§è¡Œã€‚")]),this._v(" "),s("li",[this._v("ä»¥ callIndex ç”Ÿæˆçš„è‡ªå¢idä½œä¸ºå­˜å‚¨çŠ¶æ€å€¼çš„keyã€‚è¯´æ˜ useState éœ€è¦ä¾èµ–ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶çš„è°ƒç”¨é¡ºåºæ¥åŒ¹é…è¿‡å»çš„ stateï¼ˆæ¯æ¬¡æ¸²æŸ“ callIndex ä¸ºé‡ç½®ä¸º0ï¼‰ã€‚è¿™ä¹Ÿé™åˆ¶äº† useState å¿…é¡»åœ¨é¡¶å±‚ä»£ç ä¸­ä½¿ç”¨ã€‚")]),this._v(" "),s("li",[this._v("å…¶å®ƒ hooks ä¹Ÿå¿…é¡»éµå¾ªä»¥ä¸Šä¸¤ç‚¹ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useeffect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useeffect","aria-hidden":"true"}},[this._v("#")]),this._v(" useEffect")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("void useEffect(rawEffect, deps);")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("cleanup")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" current "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cleanup\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("current")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("effect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" current "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" effect\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("current")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rawEffectçš„è¿”å›å€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°çš„è¯ï¼Œåˆ™å®šä¹‰ä¸ºuseEffectå‰¯ä½œç”¨çš„æ¸…ç†å‡½æ•°ã€‚")]),t._v("\n        effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawEffect\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ç»„ä»¶å®ä¾‹ä¸Šï¼Œå­˜å‚¨useEffectç›¸å…³é€»è¾‘ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      deps\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶å®ä¾‹mountedæ—¶ï¼Œæ‰§è¡ŒuseEffecté€»è¾‘ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:mounted'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶å®ä¾‹destroyedæ—¶ï¼Œæ‰§è¡ŒuseEffectç›¸å…³æ¸…ç†é€»è¾‘ã€‚")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:destroyed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥æœªæŒ‡å®šä¾èµ–é¡¹æˆ–å­˜åœ¨æ˜ç¡®çš„ä¾èµ–é¡¹æ—¶ï¼Œå½“ç»„ä»¶å®ä¾‹updatedæ—¶ï¼Œæ‰§è¡ŒuseEffecté€»è¾‘ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‹¥æŒ‡å®šä¾èµ–é¡¹ä¸º [], åˆ™useEffectåªåœ¨mountedæ—¶æ‰§è¡Œä¸€æ¬¡ã€‚")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:updated'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" record "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cleanup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevDeps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" record\n    record"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deps\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("deps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("some")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" prevDeps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¾èµ–çš„çŠ¶æ€å€¼æœ‰å˜åŠ¨æ—¶ï¼Œæ¸…ç†useEffectçš„å‰¯ä½œç”¨å¹¶é‡æ–°æ‰§è¡Œã€‚")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useEffect æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå°† current çš„å±æ€§ç½®ä¸º null. è¿™é‡Œå°† current çš„å€¼è®¾ç½®ä¸º rawEffectï¼Œ")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ˜¯ä¸ºäº†åœ¨ updated æ—¶æ‰§è¡Œ useEffect é€»è¾‘ã€‚")]),t._v("\n      effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawEffect\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("å¦‚æœ deps ä¸º null/undefinedï¼Œåˆ™å‰¯ä½œç”¨é€»è¾‘åœ¨æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œã€‚")]),t._v(" "),a("li",[t._v("å¦‚æœ deps æŒ‡å®šäº†ä¾èµ–çš„çŠ¶æ€ï¼Œåˆ™ç›¸åº”çŠ¶æ€æ”¹å˜æ—¶ï¼Œä¼šæ‰§è¡Œå‰¯ä½œç”¨é€»è¾‘ã€‚")]),t._v(" "),a("li",[t._v("å¦‚æœ deps æŒ‡å®šä¸º []ï¼Œåˆ™å‰¯ä½œç”¨é€»è¾‘ä»…ä¼šåœ¨ mounted æ—¶æ‰§è¡Œã€‚")]),t._v(" "),a("li",[t._v("æ¯æ¬¡éœ€è¦æ‰§è¡Œå‰¯ä½œç”¨é€»è¾‘æ—¶ï¼Œéƒ½ä¼šå…ˆæ‰§è¡Œæ¸…ç†é€»è¾‘ -- rawEffect çš„è¿”å›å€¼ã€‚")]),t._v(" "),a("li",[t._v("ç»„ä»¶ destroyed æ—¶ï¼Œä¼šæ‰§è¡Œæ¸…ç†é€»è¾‘ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useref","aria-hidden":"true"}},[this._v("#")]),this._v(" useRef")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("const refContainer = useRef(initialValue)")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" _refsStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" refs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" isMounting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("refs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" initial\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    refs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usemounted"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usemounted","aria-hidden":"true"}},[this._v("#")]),this._v(" useMounted")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usedestroyed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usedestroyed","aria-hidden":"true"}},[this._v("#")]),this._v(" useDestroyed")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDestroyed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"useupdated"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useupdated","aria-hidden":"true"}},[this._v("#")]),this._v(" useUpdated")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useUpdated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isMount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ useRef ç”Ÿæˆä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      isMount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·³è¿‡ mounted.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usewatch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usewatch","aria-hidden":"true"}},[this._v("#")]),this._v(" useWatch")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$watch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"usecomputed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecomputed","aria-hidden":"true"}},[this._v("#")]),this._v(" useComputed")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useComputed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureCurrentInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("callIndex\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_computedStore\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMounting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    currentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$watch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      getter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      val "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" val\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"åŒ…è£…å‡½æ•°å¼ç»„ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŒ…è£…å‡½æ•°å¼ç»„ä»¶","aria-hidden":"true"}},[this._v("#")]),this._v(" åŒ…è£…å‡½æ•°å¼ç»„ä»¶")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withHooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        _state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­˜å‚¨ hook state.")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­˜å‚¨ hooks ç›¸å…³è¾…åŠ©å˜é‡ã€‚")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_effectStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_refsStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_computedStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      callIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡ç½®ç´¢å¼•ï¼Œä»¥ä¾¿æ ¹æ®è°ƒç”¨æ¬¡åºåŒ¹é…å¯¹åº”çš„ hooks.")]),t._v("\n      currentInstance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰ç»„ä»¶å®ä¾‹")]),t._v("\n      isMounting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_vnode "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ‡è¯†ç»„ä»¶çš„æŒ‚è½½çŠ¶æ€ã€‚")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$attrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¸²æŸ“")]),t._v("\n      currentInstance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ret\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="hooks-and-vue.md";s.default=e.exports}}]);